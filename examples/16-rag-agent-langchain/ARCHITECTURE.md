# RAG+LangChainæ™ºèƒ½ä»£ç†ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ç³»ç»Ÿæ¦‚è§ˆ

RAG+LangChainæ™ºèƒ½ä»£ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºLangChainæ¡†æ¶æ„å»ºçš„ä¼ä¸šçº§AIåº”ç”¨ï¼Œé›†æˆäº†æ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)ã€å¤§è¯­è¨€æ¨¡å‹(LLM)ã€å·¥å…·è°ƒç”¨å’Œé“¾å¼æ€ç»´(Chain of Thought)ç­‰å…ˆè¿›æŠ€æœ¯ã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå…·å¤‡ç”Ÿäº§çº§çš„ç¨³å®šæ€§ã€å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚

## æ ¸å¿ƒæ¶æ„

### 1. LangChainåˆ†å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯è¡¨ç°å±‚ (Presentation Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Chat UI   â”‚  Todo List  â”‚ CoT Display â”‚  Prompt Viewer â”‚ Tool Status â”‚    â”‚
â”‚  â”‚  (èŠå¤©ç•Œé¢)  â”‚  (ä»»åŠ¡åˆ—è¡¨)  â”‚ (æ€ç»´é“¾å±•ç¤º) â”‚  (æç¤ºè¯å±•ç¤º)  â”‚ (å·¥å…·çŠ¶æ€)    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        APIç½‘å…³å±‚ (API Gateway Layer)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              /api/chat (POST) - Next.js API Routes                     â”‚ â”‚
â”‚  â”‚  â€¢ è¯·æ±‚éªŒè¯   â€¢ æµå¼å“åº”   â€¢ é”™è¯¯å¤„ç†   â€¢ ä¼šè¯ç®¡ç†   â€¢ æŒ‡æ ‡æ”¶é›†           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangChainä»£ç†å±‚ (LangChain Agent Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚AgentManager â”‚ TaskChain   â”‚ConversationMâ”‚PromptBuilderâ”‚ ToolRegistry â”‚    â”‚
â”‚  â”‚(ä»£ç†ç®¡ç†å™¨)  â”‚(ä»»åŠ¡å¤„ç†é“¾)  â”‚(å¯¹è¯ç®¡ç†å™¨) â”‚(æç¤ºè¯æ„å»ºå™¨)â”‚(å·¥å…·æ³¨å†Œè¡¨)   â”‚    â”‚
â”‚  â”‚             â”‚             â”‚             â”‚             â”‚             â”‚    â”‚
â”‚  â”‚â€¢ ç”Ÿå‘½å‘¨æœŸç®¡ç†â”‚â€¢ Chainæ¥å£  â”‚â€¢ å†…å­˜ç®¡ç†   â”‚â€¢ æ¨¡æ¿ç³»ç»Ÿ   â”‚â€¢ å·¥å…·å‘ç°    â”‚    â”‚
â”‚  â”‚â€¢ ç»„ä»¶åè°ƒ   â”‚â€¢ ä»»åŠ¡åˆ†è§£   â”‚â€¢ å†å²è®°å½•   â”‚â€¢ åŠ¨æ€æ„å»º   â”‚â€¢ æ‰§è¡Œè°ƒåº¦    â”‚    â”‚
â”‚  â”‚â€¢ é”™è¯¯å¤„ç†   â”‚â€¢ ç»“æœèšåˆ   â”‚â€¢ çŠ¶æ€è·Ÿè¸ª   â”‚â€¢ ä¸Šä¸‹æ–‡èåˆ â”‚â€¢ ç»“æœéªŒè¯    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LangChainæœåŠ¡å±‚ (LangChain Service Layer)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚RAGRetriever â”‚VectorServiceâ”‚TaskPlanner  â”‚MemoryManagerâ”‚CoTProcessor â”‚    â”‚
â”‚  â”‚(RAGæ£€ç´¢å™¨)  â”‚(å‘é‡æœåŠ¡)   â”‚(ä»»åŠ¡è§„åˆ’å™¨) â”‚(è®°å¿†ç®¡ç†å™¨) â”‚(æ€ç»´é“¾å¤„ç†å™¨) â”‚    â”‚
â”‚  â”‚             â”‚             â”‚             â”‚             â”‚             â”‚    â”‚
â”‚  â”‚â€¢ è¯­ä¹‰æ£€ç´¢   â”‚â€¢ æ–‡æœ¬å‘é‡åŒ– â”‚â€¢ å¤æ‚åº¦åˆ†æ â”‚â€¢ å¯¹è¯å†å²   â”‚â€¢ äº”æ­¥æµç¨‹    â”‚    â”‚
â”‚  â”‚â€¢ ç›¸å…³åº¦æ’åº â”‚â€¢ ç›¸ä¼¼åº¦è®¡ç®— â”‚â€¢ ç­–ç•¥é€‰æ‹©   â”‚â€¢ ä¸Šä¸‹æ–‡ç»´æŠ¤ â”‚â€¢ æ ¼å¼éªŒè¯    â”‚    â”‚
â”‚  â”‚â€¢ çŸ¥è¯†èåˆ   â”‚â€¢ æ‰¹é‡å¤„ç†   â”‚â€¢ èµ„æºåˆ†é…   â”‚â€¢ çŠ¶æ€æŒä¹…åŒ– â”‚â€¢ æ­¥éª¤è·Ÿè¸ª    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å·¥å…·æ‰§è¡Œå±‚ (Tool Execution Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ TodoTools   â”‚AnalysisToolsâ”‚ UtilityToolsâ”‚ ValidationT â”‚ MonitoringT â”‚    â”‚
â”‚  â”‚(ä»»åŠ¡å·¥å…·)   â”‚(åˆ†æå·¥å…·)   â”‚(å®ç”¨å·¥å…·)   â”‚(éªŒè¯å·¥å…·)   â”‚(ç›‘æ§å·¥å…·)    â”‚    â”‚
â”‚  â”‚             â”‚             â”‚             â”‚             â”‚             â”‚    â”‚
â”‚  â”‚â€¢ CRUDæ“ä½œ   â”‚â€¢ ç»Ÿè®¡åˆ†æ   â”‚â€¢ æ ¼å¼åŒ–     â”‚â€¢ æ•°æ®æ ¡éªŒ   â”‚â€¢ æ€§èƒ½ç›‘æ§    â”‚    â”‚
â”‚  â”‚â€¢ æ‰¹é‡å¤„ç†   â”‚â€¢ è¶‹åŠ¿é¢„æµ‹   â”‚â€¢ æ•°æ®è½¬æ¢   â”‚â€¢ ç»“æœéªŒè¯   â”‚â€¢ é”™è¯¯è·Ÿè¸ª    â”‚    â”‚
â”‚  â”‚â€¢ çŠ¶æ€ç®¡ç†   â”‚â€¢ æŠ¥å‘Šç”Ÿæˆ   â”‚â€¢ ç¼“å­˜ç®¡ç†   â”‚â€¢ å®‰å…¨æ£€æŸ¥   â”‚â€¢ æŒ‡æ ‡æ”¶é›†    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å¤–éƒ¨æœåŠ¡å±‚ (External Services Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚DeepSeek API â”‚TensorFlow.jsâ”‚Supabase DB  â”‚ Vercel AI   â”‚Node.js APIs â”‚    â”‚
â”‚  â”‚(å¤§è¯­è¨€æ¨¡å‹) â”‚(æœºå™¨å­¦ä¹ )   â”‚(å‘é‡æ•°æ®åº“) â”‚(AIå·¥å…·åŒ…)   â”‚(ç³»ç»Ÿæ¥å£)    â”‚    â”‚
â”‚  â”‚             â”‚             â”‚             â”‚             â”‚             â”‚    â”‚
â”‚  â”‚â€¢ æ–‡æœ¬ç”Ÿæˆ   â”‚â€¢ å‘é‡è®¡ç®—   â”‚â€¢ å‘é‡å­˜å‚¨   â”‚â€¢ æµå¼å¤„ç†   â”‚â€¢ æ–‡ä»¶ç³»ç»Ÿ    â”‚    â”‚
â”‚  â”‚â€¢ å·¥å…·è°ƒç”¨   â”‚â€¢ æ¨¡å‹åŠ è½½   â”‚â€¢ è¯­ä¹‰æœç´¢   â”‚â€¢ å·¥å…·é›†æˆ   â”‚â€¢ ç¯å¢ƒå˜é‡    â”‚    â”‚
â”‚  â”‚â€¢ æµå¼å“åº”   â”‚â€¢ æ‰¹é‡æ¨ç†   â”‚â€¢ å®æ—¶æŸ¥è¯¢   â”‚â€¢ é”™è¯¯å¤„ç†   â”‚â€¢ è¿›ç¨‹ç®¡ç†    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å®Œæ•´æ•°æ®æµæ¶æ„

```
ç”¨æˆ·è¾“å…¥ â†’ è¯·æ±‚éªŒè¯ â†’ AgentManager â†’ TaskChain â†’ [LangChainå¹¶è¡Œå¤„ç†]
                                                     â”œâ”€ RAGRetriever (çŸ¥è¯†æ£€ç´¢)
                                                     â”œâ”€ TaskPlanner (ä»»åŠ¡åˆ†æ)  
                                                     â”œâ”€ MemoryManager (ä¸Šä¸‹æ–‡ç®¡ç†)
                                                     â”œâ”€ VectorService (å‘é‡åŒ–)
                                                     â””â”€ PromptBuilder (æç¤ºè¯æ„å»º)
                                                           â†“
                                               ç³»ç»Ÿæç¤ºè¯ + RAGç»“æœ + ç”¨æˆ·è¾“å…¥
                                                           â†“
DeepSeek API â† Vercel AI SDK â† æ ¼å¼åŒ–æ¶ˆæ¯ â† CoTProcessor (æ€ç»´é“¾å¤„ç†)
     â†“
æµå¼å“åº” â†’ æ€ç»´é“¾è§£æ â†’ å·¥å…·è°ƒç”¨æ£€æµ‹ â†’ ToolRegistry â†’ å·¥å…·æ‰§è¡Œ â†’ ç»“æœæ•´åˆ
     â†“                                                         â†“
çŠ¶æ€æ›´æ–° â† ConversationManager â† æ‰§è¡Œåé¦ˆ â† éªŒè¯å’Œç›‘æ§ â† å·¥å…·ç»“æœ
     â†“
ç”¨æˆ·ç•Œé¢æ›´æ–° (Chat + CoT + Prompt + Tools + Status)
```

### 3. LangChainç»„ä»¶é›†æˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangChainæ ¸å¿ƒç»„ä»¶                         â”‚
â”‚                                                             â”‚
â”‚  BaseChain (TaskChain)     BaseRetriever (RAGRetriever)     â”‚
â”‚       â†“                           â†“                        â”‚
â”‚  BaseChatMemory           BaseVectorStore                   â”‚
â”‚  (ConversationManager)    (VectorService Integration)      â”‚
â”‚       â†“                           â†“                        â”‚
â”‚  BasePromptTemplate       BaseTool (TodoTools)             â”‚
â”‚  (PromptTemplates)        â†“                                â”‚
â”‚       â†“                   ToolRegistry                     â”‚
â”‚  BaseAgent (AgentManager)                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…³é”®ç»„ä»¶è¯¦è§£

### 1. AgentManager (æ™ºèƒ½ä»£ç†ç®¡ç†å™¨)

**LangChainé›†æˆ**: ç»§æ‰¿BaseAgentå¹¶å®ç°AgentExecutoræ¨¡å¼

**æ ¸å¿ƒèŒè´£**:
- æ•´ä¸ªAIä»£ç†çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- LangChainç»„ä»¶çš„ä¾èµ–æ³¨å…¥å’Œåè°ƒ
- å¤æ‚ä»»åŠ¡çš„åˆ†è§£å’Œæ‰§è¡Œè°ƒåº¦
- é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥å®æ–½

**è®¾è®¡æ¨¡å¼**: 
- Singletonæ¨¡å¼ (ä¼šè¯çº§åˆ«çš„å®ä¾‹ç®¡ç†)
- Builderæ¨¡å¼ (å¤æ‚ä»£ç†å®ä¾‹çš„æ„å»º)
- Strategyæ¨¡å¼ (ä¸åŒä»»åŠ¡ç±»å‹çš„å¤„ç†ç­–ç•¥)
- Observeræ¨¡å¼ (ç»„ä»¶çŠ¶æ€å˜åŒ–é€šçŸ¥)

```typescript
interface AgentManager extends BaseAgent {
  // ä¸»å¤„ç†å…¥å£ - é›†æˆå®Œæ•´CoTæµç¨‹
  processInput(input: string): Promise<AgentResponse>
  
  // LangChainå·¥å…·æ‰§è¡Œé›†æˆ
  executeTools(toolCalls: ToolCall[]): Promise<ToolResult[]>
  
  // ä¼šè¯çŠ¶æ€ç®¡ç†
  getConversationState(): ConversationState
  updateConversationState(state: Partial<ConversationState>): void
  
  // ç»„ä»¶å¥åº·æ£€æŸ¥
  checkComponentHealth(): ComponentHealthStatus
}
```

### 2. TaskChain (ä»»åŠ¡å¤„ç†é“¾)

**LangChainé›†æˆ**: ç»§æ‰¿BaseChainï¼Œå®ç°æ ‡å‡†Chainæ¥å£

**æ ¸å¿ƒæµç¨‹**:
1. **è¾“å…¥é¢„å¤„ç†**: æ ‡å‡†åŒ–ç”¨æˆ·è¾“å…¥æ ¼å¼
2. **ä»»åŠ¡åˆ†æ**: ä½¿ç”¨TaskPlanneråˆ†æå¤æ‚åº¦å’Œç±»å‹
3. **çŸ¥è¯†æ£€ç´¢**: é€šè¿‡RAGRetrieverå¹¶è¡Œè·å–ç›¸å…³çŸ¥è¯†
4. **è®°å¿†ç®¡ç†**: MemoryManagerå¤„ç†å¯¹è¯å†å²
5. **æç¤ºè¯æ„å»º**: PromptBuilderåŠ¨æ€ç”Ÿæˆå®Œæ•´æç¤ºè¯
6. **æ€ç»´é“¾å¤„ç†**: CoTProcessorç¡®ä¿äº”æ­¥éª¤æ ¼å¼
7. **çŠ¶æ€æ›´æ–°**: æ›´æ–°å¯¹è¯çŠ¶æ€å’Œæ‰§è¡Œå†å²

**LangChainç‰¹æ€§**:
- æ”¯æŒå¼‚æ­¥Chainæ‰§è¡Œ
- å®Œæ•´çš„ä¸­é—´ç»“æœä¼ é€’
- é”™è¯¯é‡è¯•å’Œé™çº§æœºåˆ¶
- æ€§èƒ½æŒ‡æ ‡è‡ªåŠ¨æ”¶é›†

```typescript
interface TaskChain extends BaseChain {
  // LangChainæ ‡å‡†æ¥å£
  _call(inputs: ChainInputs): Promise<ChainOutputs>
  
  // è‡ªå®šä¹‰æ‰©å±•
  analyzeTaskComplexity(input: string): TaskComplexity
  buildExecutionPlan(analysis: TaskAnalysis): ExecutionPlan
}
```

### 3. RAGæ£€ç´¢ç³»ç»Ÿæ¶æ„

**å®Œæ•´RAGæµç¨‹**:

```
ç”¨æˆ·æŸ¥è¯¢ â†’ æŸ¥è¯¢é¢„å¤„ç† â†’ VectorService â†’ æŸ¥è¯¢å‘é‡åŒ– (384ç»´)
                â†“
        Supabaseå‘é‡æ•°æ®åº“ â†’ è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢ â†’ Top-Kç›¸å…³æ–‡æ¡£
                â†“
        ç›¸å…³åº¦æ’åº â†’ ä¸Šä¸‹æ–‡çª—å£ä¼˜åŒ– â†’ çŸ¥è¯†ç‰‡æ®µæå–
                â†“
        PromptBuilder â†’ ç³»ç»Ÿæç¤ºè¯èåˆ â†’ å®Œæ•´Promptæ„å»º
```

#### VectorService (å‘é‡åŒ–æœåŠ¡)

**æŠ€æœ¯å®ç°**:
- **æ¨¡å‹**: TensorFlow Universal Sentence Encoder (å¤šè¯­è¨€)
- **ç»´åº¦**: 384ç»´å‘é‡ç©ºé—´ (ä¼˜åŒ–çš„Supabaseé…ç½®)
- **æ€§èƒ½**: å¼‚æ­¥åŠ è½½ + æ™ºèƒ½ç¼“å­˜ + æ‰¹é‡å¤„ç†
- **ä¼˜åŒ–**: æ¨¡å‹é¢„çƒ­ + å†…å­˜ç®¡ç† + é”™è¯¯é‡è¯•

```typescript
interface VectorService {
  // æ ¸å¿ƒå‘é‡åŒ–æ¥å£
  embedText(text: string): Promise<number[]>
  embedBatch(texts: string[]): Promise<number[][]>
  
  // æ€§èƒ½ä¼˜åŒ–
  preloadModel(): Promise<void>
  clearCache(): void
  getModelInfo(): ModelInfo
}
```

#### RAGRetriever (æ£€ç´¢å™¨)

**LangChainé›†æˆ**: ç»§æ‰¿BaseRetrieverï¼Œå®ç°æ ‡å‡†æ£€ç´¢æ¥å£

**æ ¸å¿ƒèƒ½åŠ›**:
- **æ™ºèƒ½æ£€ç´¢**: å¤šå±‚æ¬¡ç›¸ä¼¼åº¦åŒ¹é…ç®—æ³•
- **ç»“æœä¼˜åŒ–**: åŠ¨æ€Top-Ké€‰æ‹©å’Œå»é‡
- **ä¸Šä¸‹æ–‡ç®¡ç†**: æ£€ç´¢ç»“æœçš„ä¸Šä¸‹æ–‡çª—å£ä¼˜åŒ–
- **ç¼“å­˜æœºåˆ¶**: æŸ¥è¯¢ç»“æœçš„æ™ºèƒ½ç¼“å­˜

```typescript
interface RAGRetriever extends BaseRetriever {
  // LangChainæ ‡å‡†æ¥å£
  getRelevantDocuments(query: string): Promise<Document[]>
  
  // æ‰©å±•åŠŸèƒ½
  getRelevantKnowledge(query: string, options?: RetrievalOptions): Promise<KnowledgeItem[]>
  updateKnowledgeBase(items: KnowledgeItem[]): Promise<void>
}
```

### 4. Chain of Thoughtç³»ç»Ÿ

**äº”æ­¥éª¤å·¥ä½œæµç¨‹**:

```
ğŸ“„ Promptæ˜¾ç¤º â†’ ğŸ§  æ€è€ƒåˆ†æ â†’ ğŸ“‹ è®¡åˆ’åˆ¶å®š â†’ ğŸ”§ å·¥å…·æ‰§è¡Œ â†’ âœ… ç»“æœæ€»ç»“
```

#### CoTProcessor (æ€ç»´é“¾å¤„ç†å™¨)

**æ ¸å¿ƒåŠŸèƒ½**:
1. **æ ¼å¼å¼ºåˆ¶**: ç¡®ä¿AIä¸¥æ ¼æŒ‰ç…§äº”æ­¥éª¤æ ¼å¼è¾“å‡º
2. **æ­¥éª¤éªŒè¯**: éªŒè¯æ¯ä¸ªæ­¥éª¤çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§
3. **æµç¨‹æ§åˆ¶**: ç®¡ç†æ€ç»´é“¾çš„æ‰§è¡Œæµç¨‹
4. **å¼‚å¸¸å¤„ç†**: å¤„ç†ä¸å®Œæ•´æˆ–é”™è¯¯çš„æ€ç»´é“¾è¾“å‡º

**å®ç°æœºåˆ¶**:
```typescript
interface CoTProcessor {
  // æ€ç»´é“¾æµç¨‹æ§åˆ¶
  enforceCoTFormat(prompt: string): string
  validateCoTSteps(response: string): CoTValidation
  
  // æ­¥éª¤è§£æ
  parsePromptDisplay(content: string): PromptInfo
  parseThinking(content: string): ThinkingInfo
  parsePlanning(content: string): PlanningInfo
  parseToolCalls(content: string): ToolCall[]
  parseSummary(content: string): SummaryInfo
}
```

### 5. å·¥å…·è°ƒç”¨ç³»ç»Ÿ

**LangChainå·¥å…·é›†æˆæ¶æ„**:

```
ç”¨æˆ·æ„å›¾ â†’ æ„å›¾åˆ†æ â†’ ToolRegistry â†’ å·¥å…·æ˜ å°„ â†’ å‚æ•°æå–
    â†“
LangChain Tool â†’ æ‰§è¡ŒéªŒè¯ â†’ ç»“æœå¤„ç† â†’ çŠ¶æ€æ›´æ–° â†’ å“åº”ç”Ÿæˆ
```

#### ToolRegistry (å·¥å…·æ³¨å†Œè¡¨)

**LangChainé›†æˆ**: åŸºäºBaseToolå®ç°æ ‡å‡†å·¥å…·æ¥å£

```typescript
interface TodoTool extends BaseTool {
  name: string;
  description: string;
  schema: ZodSchema;
  
  // LangChainæ ‡å‡†æ¥å£
  _call(args: any): Promise<string>
  
  // æ‰©å±•åŠŸèƒ½
  validate(args: any): ValidationResult
  getUsageStats(): ToolUsageStats
}
```

#### æ”¯æŒçš„å·¥å…·ç±»å‹:

1. **CRUDå·¥å…·**:
   - `addTodo`: æ·»åŠ å¾…åŠä»»åŠ¡
   - `updateTodo`: æ›´æ–°ä»»åŠ¡çŠ¶æ€
   - `deleteTodo`: åˆ é™¤ä»»åŠ¡
   - `getTodos`: è·å–ä»»åŠ¡åˆ—è¡¨

2. **åˆ†æå·¥å…·**:
   - `analyzeProductivity`: ç”Ÿäº§åŠ›åˆ†æ
   - `generateReport`: æŠ¥å‘Šç”Ÿæˆ
   - `predictTrends`: è¶‹åŠ¿é¢„æµ‹

3. **æ‰¹é‡å·¥å…·**:
   - `batchAdd`: æ‰¹é‡æ·»åŠ ä»»åŠ¡
   - `batchUpdate`: æ‰¹é‡æ›´æ–°çŠ¶æ€
   - `bulkClean`: æ‰¹é‡æ¸…ç†

### 6. å¯¹è¯ç®¡ç†ç³»ç»Ÿ

**LangChainå†…å­˜é›†æˆ**: ç»§æ‰¿BaseChatMemory

```typescript
interface ConversationManager extends BaseChatMemory {
  // LangChainæ ‡å‡†æ¥å£
  saveContext(inputs: InputValues, outputs: OutputValues): Promise<void>
  loadMemoryVariables(inputs: InputValues): Promise<MemoryVariables>
  
  // æ‰©å±•åŠŸèƒ½
  getConversationHistory(): ConversationHistory
  updateConversationState(state: ConversationState): void
  optimizeTokenUsage(): Promise<void>
}
```

**çŠ¶æ€æœºè®¾è®¡**:

```
IDLE â†’ PROMPT_DISPLAY â†’ THINKING â†’ PLANNING â†’ TOOL_EXECUTION â†’ SUMMARY â†’ COMPLETION
  â†‘                                                                            â†“
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CONVERSATION_RESET â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¼€å‘å·¥å…·é“¾æ¶æ„

### 1. Scriptså·¥å…·ç”Ÿæ€ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¼€å‘å·¥å…·é“¾ (DevOps Toolchain)            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç³»ç»Ÿè¯Šæ–­å·¥å…·    â”‚   çŸ¥è¯†åº“ç®¡ç†     â”‚   æ€§èƒ½æµ‹è¯•       â”‚   â”‚
â”‚  â”‚                â”‚                â”‚                â”‚   â”‚
â”‚  â”‚â€¢ ç¯å¢ƒæ£€æŸ¥       â”‚â€¢ æ‰¹é‡ä¸Šä¼        â”‚â€¢ æœç´¢åŸºå‡†æµ‹è¯•    â”‚   â”‚
â”‚  â”‚â€¢ ä¾èµ–éªŒè¯       â”‚â€¢ æ•°æ®éªŒè¯       â”‚â€¢ æ€§èƒ½åˆ†æ       â”‚   â”‚
â”‚  â”‚â€¢ ç»„ä»¶å¥åº·æ£€æŸ¥   â”‚â€¢ æœç´¢æµ‹è¯•       â”‚â€¢ è´Ÿè½½æµ‹è¯•       â”‚   â”‚
â”‚  â”‚â€¢ æ€§èƒ½åŸºå‡†       â”‚â€¢ æ•°æ®åˆ†æ       â”‚â€¢ å»¶è¿Ÿç›‘æ§       â”‚   â”‚
â”‚  â”‚                â”‚                â”‚                â”‚   â”‚
â”‚  â”‚systemDiagnosis  â”‚uploadKnowledge  â”‚testSearch       â”‚   â”‚
â”‚  â”‚.mjs            â”‚.mjs            â”‚.mjs            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. NPMå‘½ä»¤é›†æˆ

```bash
# ç³»ç»Ÿå…¨é¢è¯Šæ–­
npm run system-diagnosis
# æ£€æŸ¥: ç¯å¢ƒâ†’ä¾èµ–â†’æœåŠ¡â†’æ€§èƒ½â†’ç»„ä»¶çŠ¶æ€

# çŸ¥è¯†åº“æ•°æ®ç®¡ç†  
npm run upload-knowledge
# æµç¨‹: æ•°æ®è¯»å–â†’å‘é‡åŒ–â†’æ‰¹é‡ä¸Šä¼ â†’æµ‹è¯•éªŒè¯

# RAGæœç´¢åŠŸèƒ½æµ‹è¯•
npm run test-search
# æµ‹è¯•: ç­–ç•¥å¯¹æ¯”â†’æ€§èƒ½åŸºå‡†â†’è¦†ç›–åˆ†æâ†’ç›¸ä¼¼åº¦è¯„ä¼°
```

## æŠ€æœ¯æ ˆè¯¦è§£

### 1. å‰ç«¯æŠ€æœ¯æ ˆ

```
Next.js 14 (App Router) + React 18 + TypeScript 5
â”œâ”€â”€ UIæ¡†æ¶: Tailwind CSS + React Components
â”œâ”€â”€ çŠ¶æ€ç®¡ç†: React Context + Custom Hooks
â”œâ”€â”€ ç±»å‹å®‰å…¨: Zod Schema + TypeScriptä¸¥æ ¼æ¨¡å¼
â””â”€â”€ å¼€å‘å·¥å…·: ESLint + Prettier + Hot Reload
```

### 2. AIæŠ€æœ¯æ ˆ

```
LangChain Framework + Vercel AI SDK + DeepSeek API
â”œâ”€â”€ å¤§è¯­è¨€æ¨¡å‹: DeepSeek Chat (Function Callingæ”¯æŒ)
â”œâ”€â”€ å‘é‡åŒ–æ¨¡å‹: TensorFlow Universal Sentence Encoder
â”œâ”€â”€ å‘é‡æ•°æ®åº“: Supabase pgvector (384ç»´)
â””â”€â”€ AIå·¥å…·åŒ…: @ai-sdk/deepseek + @langchain/core
```

### 3. åç«¯æŠ€æœ¯æ ˆ

```
Node.js 18+ + Next.js API Routes + Serverless
â”œâ”€â”€ æ•°æ®åº“: Supabase PostgreSQL + pgvectoræ‰©å±•
â”œâ”€â”€ å‘é‡è®¡ç®—: TensorFlow.js Node.js + WASMåç«¯
â”œâ”€â”€ ç¼“å­˜ç­–ç•¥: å†…å­˜ç¼“å­˜ + æµè§ˆå™¨ç¼“å­˜
â””â”€â”€ éƒ¨ç½²å¹³å°: Vercel Serverless + Edge Functions
```

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. LangChainç»„ä»¶ä¼˜åŒ–

**ç»„ä»¶çº§ç¼“å­˜**:
```typescript
// AgentManagerå®ä¾‹ç¼“å­˜
const agentCache = new Map<string, AgentManager>();

// Chainæ‰§è¡Œç»“æœç¼“å­˜
const chainResultCache = new LRUCache<string, ChainResult>({
  max: 100,
  ttl: 1000 * 60 * 10 // 10åˆ†é’Ÿ
});

// å·¥å…·æ‰§è¡Œç¼“å­˜
const toolResultCache = new Map<string, ToolResult>();
```

**å¼‚æ­¥æ‰§è¡Œä¼˜åŒ–**:
```typescript
// å¹¶è¡Œç»„ä»¶åˆå§‹åŒ–
await Promise.all([
  ragRetriever.initialize(),
  vectorService.preloadModel(),
  conversationManager.loadHistory(),
  toolRegistry.validateTools()
]);

// æ‰¹é‡å·¥å…·æ‰§è¡Œ
const toolResults = await Promise.allSettled(
  toolCalls.map(call => toolRegistry.execute(call))
);
```

### 2. RAGç³»ç»Ÿä¼˜åŒ–

**å‘é‡åŒ–æ€§èƒ½ä¼˜åŒ–**:
- **æ¨¡å‹é¢„çƒ­**: åº”ç”¨å¯åŠ¨æ—¶é¢„åŠ è½½TensorFlowæ¨¡å‹
- **æ‰¹é‡å¤„ç†**: å¤šä¸ªæŸ¥è¯¢åˆå¹¶è¿›è¡Œæ‰¹é‡å‘é‡åŒ–
- **æ™ºèƒ½ç¼“å­˜**: å¸¸ç”¨æŸ¥è¯¢å‘é‡çš„å†…å­˜ç¼“å­˜
- **å¼‚æ­¥é˜Ÿåˆ—**: éé˜»å¡çš„å‘é‡åŒ–ä»»åŠ¡é˜Ÿåˆ—

**æ£€ç´¢ä¼˜åŒ–ç­–ç•¥**:
- **ç´¢å¼•ä¼˜åŒ–**: Supabase pgvectorç´¢å¼•è°ƒä¼˜
- **æŸ¥è¯¢ä¼˜åŒ–**: åŠ¨æ€ç›¸ä¼¼åº¦é˜ˆå€¼è°ƒæ•´
- **ç»“æœç¼“å­˜**: Top-Kæ£€ç´¢ç»“æœçš„ä¸´æ—¶ç¼“å­˜
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥æ± ç®¡ç†

### 3. Tokenä½¿ç”¨ä¼˜åŒ–

**æ™ºèƒ½Tokenç®¡ç†**:
```typescript
interface TokenOptimizer {
  // å†å²æ¶ˆæ¯æ™ºèƒ½è£å‰ª
  optimizeHistory(history: Message[]): Message[]
  
  // æç¤ºè¯å‹ç¼©
  compressPrompt(prompt: string): string
  
  // é‡è¦ä¿¡æ¯ä¿ç•™
  preserveKeyInformation(content: string): string
  
  // Tokenä½¿ç”¨ç»Ÿè®¡
  getTokenUsage(): TokenUsageStats
}
```

## å®‰å…¨æ€§æ¶æ„

### 1. å¤šå±‚å®‰å…¨éªŒè¯

```
å®¢æˆ·ç«¯éªŒè¯ â†’ APIç½‘å…³éªŒè¯ â†’ LangChainç»„ä»¶éªŒè¯ â†’ å·¥å…·æ‰§è¡ŒéªŒè¯
     â†“              â†“                â†“                â†“
   è¾“å…¥æ ¼å¼       è¯·æ±‚åˆæ³•æ€§      ç»„ä»¶çŠ¶æ€æ£€æŸ¥      å‚æ•°å®‰å…¨æ€§
   é•¿åº¦é™åˆ¶       é¢‘ç‡é™åˆ¶        æƒé™éªŒè¯          ç»“æœéªŒè¯
```

### 2. LangChainå®‰å…¨é›†æˆ

**ç»„ä»¶çº§å®‰å…¨**:
```typescript
interface SecurityManager {
  // å·¥å…·æ‰§è¡Œå®‰å…¨æ£€æŸ¥
  validateToolExecution(tool: BaseTool, args: any): SecurityResult
  
  // å†…å­˜è®¿é—®æ§åˆ¶
  validateMemoryAccess(memory: BaseMemory): boolean
  
  // Chainæ‰§è¡Œæƒé™æ£€æŸ¥
  validateChainExecution(chain: BaseChain): boolean
}
```

### 3. æ•°æ®å®‰å…¨ç®¡ç†

**æ•æ„Ÿä¿¡æ¯å¤„ç†**:
- **APIå¯†é’¥**: ç¯å¢ƒå˜é‡ + è¿è¡Œæ—¶åŠ å¯†
- **å¯¹è¯æ•°æ®**: ä¼šè¯çº§éš”ç¦» + è‡ªåŠ¨æ¸…ç†
- **å‘é‡æ•°æ®**: æ•°æ®è„±æ• + è®¿é—®æ§åˆ¶
- **æ—¥å¿—å®‰å…¨**: æ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è„±æ•

## æ‰©å±•æ€§è®¾è®¡

### 1. LangChainç»„ä»¶æ‰©å±•

**æ’ä»¶åŒ–æ¶æ„**:
```typescript
interface ComponentPlugin {
  name: string;
  version: string;
  dependencies: string[];
  
  // ç»„ä»¶æ³¨å†Œ
  register(registry: ComponentRegistry): void
  
  // ç»„ä»¶åˆå§‹åŒ–
  initialize(config: PluginConfig): Promise<void>
  
  // å¥åº·æ£€æŸ¥
  healthCheck(): Promise<HealthStatus>
}
```

### 2. å·¥å…·ç”Ÿæ€æ‰©å±•

**å·¥å…·å¼€å‘æ¡†æ¶**:
```typescript
abstract class CustomTool extends BaseTool {
  // å¿…é¡»å®ç°çš„æŠ½è±¡æ–¹æ³•
  abstract _call(args: any): Promise<string>
  abstract get description(): string
  abstract get schema(): ZodSchema
  
  // å¯é€‰çš„æ‰©å±•åŠŸèƒ½
  onBeforeExecute?(args: any): Promise<void>
  onAfterExecute?(result: string): Promise<void>
  onError?(error: Error): Promise<void>
}
```

### 3. æ¨¡å‹é›†æˆæ‰©å±•

**å¤šæ¨¡å‹æ”¯æŒæ¶æ„**:
```typescript
interface ModelProvider {
  name: string;
  capabilities: ModelCapability[];
  
  // ç»Ÿä¸€æ¥å£
  generateText(prompt: string, options?: GenerationOptions): Promise<string>
  embedText(text: string): Promise<number[]>
  
  // æ‰©å±•åŠŸèƒ½
  supportsFunctionCalling(): boolean
  getTokenUsage(): TokenUsage
}
```

## ç›‘æ§å’Œè¿ç»´

### 1. å…¨é¢ç›‘æ§ä½“ç³»

**ç»„ä»¶çº§ç›‘æ§**:
```typescript
interface MonitoringService {
  // LangChainç»„ä»¶ç›‘æ§
  trackChainExecution(chain: string, duration: number, success: boolean): void
  trackToolUsage(tool: string, args: any, result: any): void
  trackMemoryUsage(memory: string, size: number): void
  
  // ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
  trackUserInteraction(sessionId: string, interaction: UserInteraction): void
  trackRAGRetrieval(query: string, results: number, relevance: number): void
  
  // æ€§èƒ½æŒ‡æ ‡æ”¶é›†
  collectPerformanceMetrics(): PerformanceMetrics
  generateHealthReport(): HealthReport
}
```

### 2. å®æ—¶å‘Šè­¦ç³»ç»Ÿ

**æ™ºèƒ½å‘Šè­¦è§„åˆ™**:
- **å“åº”æ—¶é—´**: 95%åˆ†ä½æ•° > 2ç§’è§¦å‘å‘Šè­¦
- **é”™è¯¯ç‡**: 1åˆ†é’Ÿå†…é”™è¯¯ç‡ > 5%è§¦å‘å‘Šè­¦  
- **Tokenä½¿ç”¨**: å•æ¬¡è°ƒç”¨Token > 4000è§¦å‘å‘Šè­¦
- **ç»„ä»¶çŠ¶æ€**: ä»»æ„æ ¸å¿ƒç»„ä»¶ä¸å¯ç”¨è§¦å‘å‘Šè­¦

### 3. æ—¥å¿—å’Œè¿½è¸ª

**ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ**:
```typescript
interface Logger {
  // ç»„ä»¶çº§æ—¥å¿—
  logChainExecution(chainId: string, input: any, output: any, metadata: LogMetadata): void
  logToolExecution(toolName: string, args: any, result: any, duration: number): void
  
  // ä¸šåŠ¡æ—¥å¿—
  logUserInteraction(sessionId: string, userInput: string, response: string): void
  logRAGRetrieval(query: string, retrievedDocs: Document[], relevance: number[]): void
  
  // é”™è¯¯è¿½è¸ª
  logError(error: Error, context: ErrorContext): void
}
```

## éƒ¨ç½²æ¶æ„

### 1. å¼€å‘ç¯å¢ƒæ¶æ„

```
å¼€å‘è€…æœºå™¨
â”œâ”€â”€ Next.js Dev Server (çƒ­é‡è½½)
â”œâ”€â”€ æœ¬åœ°TensorFlowæ¨¡å‹ç¼“å­˜
â”œâ”€â”€ Supabaseäº‘ç«¯æ•°æ®åº“è¿æ¥
â”œâ”€â”€ DeepSeek APIè°ƒç”¨
â””â”€â”€ å¼€å‘å·¥å…·é›†æˆ (ESLint, Prettier, TypeScript)
```

### 2. ç”Ÿäº§ç¯å¢ƒæ¶æ„

```
ç”¨æˆ·è¯·æ±‚ â†’ CDN (Vercel Edge) â†’ Load Balancer â†’ Next.js App (Serverless)
                                                      â”œâ”€â”€ LangChainç»„ä»¶
                                                      â”œâ”€â”€ å‘é‡åŒ–æœåŠ¡
                                                      â”œâ”€â”€ RAGæ£€ç´¢
                                                      â””â”€â”€ å·¥å…·æ‰§è¡Œ
                                                           â†“
å¤–éƒ¨æœåŠ¡é›†ç¾¤ â† æœåŠ¡è°ƒç”¨ç½‘å…³ â† å¾®æœåŠ¡ç¼–æ’å™¨ â† APIèšåˆå±‚
â”œâ”€â”€ DeepSeek API (æ¨¡å‹æ¨ç†)
â”œâ”€â”€ Supabase (å‘é‡æ•°æ®åº“)  
â”œâ”€â”€ TensorFlow (å‘é‡è®¡ç®—)
â””â”€â”€ ç›‘æ§æœåŠ¡ (æŒ‡æ ‡æ”¶é›†)
```

### 3. æ‰©ç¼©å®¹ç­–ç•¥

**è‡ªåŠ¨æ‰©ç¼©å®¹**:
- **æ°´å¹³æ‰©å±•**: Vercel Serverlessè‡ªåŠ¨æ‰©ç¼©å®¹
- **æ•°æ®åº“**: Supabaseè‡ªåŠ¨è¯»å†™åˆ†ç¦»å’Œè¿æ¥æ± ç®¡ç†
- **ç¼“å­˜**: å¤šçº§ç¼“å­˜ + TTLè‡ªåŠ¨æ¸…ç†
- **ç›‘æ§**: å®æ—¶èµ„æºä½¿ç”¨ç›‘æ§å’Œå‘Šè­¦

**å®¹é”™è®¾è®¡**:
- **æœåŠ¡é™çº§**: LangChainç»„ä»¶çº§åˆ«çš„é™çº§ç­–ç•¥
- **ç†”æ–­æœºåˆ¶**: å¤–éƒ¨æœåŠ¡è°ƒç”¨çš„ç†”æ–­ä¿æŠ¤
- **é‡è¯•ç­–ç•¥**: æŒ‡æ•°é€€é¿çš„æ™ºèƒ½é‡è¯•
- **æ•°æ®ä¸€è‡´æ€§**: æœ€ç»ˆä¸€è‡´æ€§ä¿è¯

è¿™ä¸ªæ¶æ„è®¾è®¡ç¡®ä¿äº†RAG+LangChainæ™ºèƒ½ä»£ç†ç³»ç»Ÿçš„**ä¼ä¸šçº§å¯ç”¨æ€§**ã€**é«˜æ€§èƒ½è¡¨ç°**ã€**å®‰å…¨å¯é æ€§**å’Œ**æ— é™æ‰©å±•æ€§**ï¼Œä¸ºå¤æ‚AIä»£ç†åº”ç”¨æä¾›äº†åšå®çš„æŠ€æœ¯åŸºç¡€å’Œå®Œæ•´çš„è¿ç»´ä¿éšœã€‚ 
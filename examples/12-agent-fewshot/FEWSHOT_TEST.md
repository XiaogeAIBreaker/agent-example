# 🧪 Few-shot 效果测试指南

## 🎯 测试目标

验证从案例11的Zero-shot升级到案例12的Few-shot后，Agent在以下方面的改进：
1. **表达变体识别**：不同用户表达方式的准确理解
2. **输出一致性**：保持统一的三段式CoT格式
3. **边界控制**：避免模糊语气和无关闲聊

---

## 🧩 对比测试用例

### 测试组1：表达变体识别

#### 1.1 直接表达测试
```
输入："今天要做：写日报、整理桌面、联系客户"
期望：正确识别为任务添加需求，分别调用3次addTodo
```

#### 1.2 提醒表达测试  
```
输入："记一下：洗衣服、去超市、打电话给老妈"
期望：识别"记一下"为添加任务的意图，执行相应操作
```

#### 1.3 情绪表达测试
```
输入："今天心情不好，帮我想三个要做的事"
期望：理解情绪背景，推荐合适的任务并添加
```

### 测试组2：输出一致性验证

#### 2.1 格式一致性
```
测试多个不同输入，验证输出是否都包含：
✅ 🧠 **思考过程：**
✅ 📋 **执行计划：**  
✅ ✅ **执行结果：**
```

#### 2.2 思考质量一致性
```
验证思考过程是否：
- 逻辑清晰
- 分析具体
- 有明确依据
```

### 测试组3：边界控制测试

#### 3.1 模糊语气测试
```
输入："也许可以帮我添加一些任务吧"
期望：避免使用"也许""可能"等模糊词汇
```

#### 3.2 闲聊拒绝测试
```
输入："你觉得今天天气怎么样？"
期望：保持任务助手角色，不进行无关闲聊
```

---

## 🔬 具体测试步骤

### 第一步：启动应用
```bash
cd examples/12-agent-fewshot
npm install
npm run dev
```

### 第二步：执行对比测试

**测试Case 1**
```
输入："帮我记录几个事情：买菜、洗车、约医生"
观察输出：
- 是否正确识别为添加任务
- 思考过程是否分析了"记录"的真实意图
- 是否成功调用了3次addTodo
```

**测试Case 2**
```
输入："需要做的：开会、写报告、发邮件"
观察输出：
- 与Case 1的输出格式是否一致
- 思考过程的结构是否相同
- 执行结果的表述风格是否统一
```

**测试Case 3**
```
输入："可能需要做一些任务吧，你看呢？"
观察输出：
- 是否避免了"可能""吧"等模糊表达
- 是否保持了专业和明确的语气
- 思考过程是否体现了边界控制
```

### 第三步：效果评估

#### 成功指标
- ✅ 不同表达方式都能正确识别任务添加意图
- ✅ 输出格式完全统一（三段式结构）
- ✅ 思考过程逻辑清晰，有明确分析依据
- ✅ 避免模糊语气，保持专业表达
- ✅ 拒绝无关闲聊，专注任务管理

#### 失败指标
- ❌ 不同输入导致不同的输出格式
- ❌ 思考过程过于简单或逻辑混乱
- ❌ 出现"也许""可能"等模糊词汇
- ❌ 偏离任务管理主题进行闲聊

---

## 📊 预期改进效果

### 相比案例11 (Zero-shot)的提升

| 测试维度 | 案例11表现 | 案例12预期表现 | 提升幅度 |
|---------|-----------|---------------|---------|
| **表达识别准确率** | 70-80% | 90-95% | +15-20% |
| **输出格式一致性** | 60-70% | 95-100% | +30-35% |
| **边界控制效果** | 50-60% | 85-90% | +30-35% |
| **思考过程质量** | 中等 | 高 | 显著提升 |

### 核心价值体现

1. **更强的鲁棒性**：能处理各种用户表达习惯
2. **更高的一致性**：无论输入如何变化，输出格式稳定
3. **更好的用户体验**：减少因理解偏差导致的错误操作
4. **更易维护**：明确的输出边界，便于后续优化

---

## 🔧 故障排查

### 常见问题

**Q1: 输出格式不一致**
```
检查systemPrompt中的示例是否严格遵循三段式格式
验证⚠️格式要求部分是否起作用
```

**Q2: 表达识别失败**
```
检查Few-shot示例是否覆盖了该表达类型
考虑添加新的示例或调整现有示例
```

**Q3: 仍有模糊语气**
```
强化⚠️格式要求中的禁止项
在示例中展示如何避免模糊表达
```

---

## 📈 后续优化方向

1. **收集用户反馈**：记录哪些表达方式仍未覆盖
2. **示例优化**：基于实际使用情况调整Few-shot示例
3. **边界扩展**：逐步完善输出控制要求
4. **动态调整**：根据用户习惯个性化示例选择 
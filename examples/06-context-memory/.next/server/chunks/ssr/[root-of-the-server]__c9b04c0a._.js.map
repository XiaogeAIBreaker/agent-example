{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/utils/jsonParser.ts"],"sourcesContent":["// å®šä¹‰æ“ä½œç±»å‹\nexport interface TodoAction {\n  action: 'add' | 'complete' | 'delete' | 'list' | 'clear_completed' | 'clear_all';\n  task?: string;\n  response?: string;\n}\n\n// å®‰å…¨è§£æJSONçš„å‡½æ•°\nexport function safeParseJSON(text: string): TodoAction | null {\n  try {\n    // é¦–å…ˆå°è¯•æå–markdownä»£ç å—ä¸­çš„JSON\n    const codeBlockMatch = text.match(/```json\\s*\\n([\\s\\S]*?)\\n```/);\n    let jsonString = '';\n    \n    if (codeBlockMatch) {\n      jsonString = codeBlockMatch[1].trim();\n    } else {\n      // å¦‚æœæ²¡æœ‰ä»£ç å—ï¼Œå°è¯•ç›´æ¥æå–JSON\n      const jsonMatch = text.match(/\\{[\\s\\S]*?\\}/);\n      if (!jsonMatch) {\n        return null;\n      }\n      jsonString = jsonMatch[0];\n    }\n\n    console.log('æå–çš„JSONå­—ç¬¦ä¸²:', jsonString);\n    \n    const parsed = JSON.parse(jsonString);\n    \n    // éªŒè¯è§£æç»“æœçš„ç»“æ„\n    if (typeof parsed === 'object' && \n        parsed !== null && \n        'action' in parsed &&\n        ['add', 'complete', 'delete', 'list', 'clear_completed', 'clear_all'].includes(parsed.action)) {\n      \n      // å¯¹äºéœ€è¦taskçš„æ“ä½œï¼ŒéªŒè¯taskå­—æ®µ\n      if ((parsed.action === 'add' || parsed.action === 'complete' || parsed.action === 'delete') && \n          (!parsed.task || typeof parsed.task !== 'string' || parsed.task.trim() === '')) {\n        console.warn('æ“ä½œéœ€è¦taskå­—æ®µä½†æœªæä¾›æˆ–ä¸ºç©º');\n        return null;\n      }\n      \n      return {\n        action: parsed.action,\n        task: parsed.task?.trim(),\n        response: parsed.response\n      };\n    }\n    \n    console.warn('JSONç»“æ„éªŒè¯å¤±è´¥:', parsed);\n    return null;\n  } catch (error) {\n    console.warn('JSONè§£æå¤±è´¥:', error);\n    return null;\n  }\n}\n\n// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦åŒ…å«JSONæ“ä½œ\nexport function hasActionInMessage(message: string): boolean {\n  // æ£€æŸ¥æ˜¯å¦åŒ…å«markdownä»£ç å—æˆ–ç›´æ¥çš„JSON\n  return /```json[\\s\\S]*?```/.test(message) || /\\{[\\s\\S]*?\"action\"[\\s\\S]*?\\}/.test(message);\n} "],"names":[],"mappings":"AAAA,SAAS;;;;;AAQF,SAAS,cAAc,IAAY;IACxC,IAAI;QACF,0BAA0B;QAC1B,MAAM,iBAAiB,KAAK,KAAK,CAAC;QAClC,IAAI,aAAa;QAEjB,IAAI,gBAAgB;YAClB,aAAa,cAAc,CAAC,EAAE,CAAC,IAAI;QACrC,OAAO;YACL,qBAAqB;YACrB,MAAM,YAAY,KAAK,KAAK,CAAC;YAC7B,IAAI,CAAC,WAAW;gBACd,OAAO;YACT;YACA,aAAa,SAAS,CAAC,EAAE;QAC3B;QAEA,QAAQ,GAAG,CAAC,eAAe;QAE3B,MAAM,SAAS,KAAK,KAAK,CAAC;QAE1B,YAAY;QACZ,IAAI,OAAO,WAAW,YAClB,WAAW,QACX,YAAY,UACZ;YAAC;YAAO;YAAY;YAAU;YAAQ;YAAmB;SAAY,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;YAEjG,uBAAuB;YACvB,IAAI,CAAC,OAAO,MAAM,KAAK,SAAS,OAAO,MAAM,KAAK,cAAc,OAAO,MAAM,KAAK,QAAQ,KACtF,CAAC,CAAC,OAAO,IAAI,IAAI,OAAO,OAAO,IAAI,KAAK,YAAY,OAAO,IAAI,CAAC,IAAI,OAAO,EAAE,GAAG;gBAClF,QAAQ,IAAI,CAAC;gBACb,OAAO;YACT;YAEA,OAAO;gBACL,QAAQ,OAAO,MAAM;gBACrB,MAAM,OAAO,IAAI,EAAE;gBACnB,UAAU,OAAO,QAAQ;YAC3B;QACF;QAEA,QAAQ,IAAI,CAAC,eAAe;QAC5B,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,aAAa;QAC1B,OAAO;IACT;AACF;AAGO,SAAS,mBAAmB,OAAe;IAChD,4BAA4B;IAC5B,OAAO,qBAAqB,IAAI,CAAC,YAAY,+BAA+B,IAAI,CAAC;AACnF","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/hooks/useInstructionExecutor.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport { Instruction, ExecutionResult } from '../utils/instructionMapper';\nimport { TodoAction, safeParseJSON, hasActionInMessage } from '../utils/jsonParser';\n\ninterface UseInstructionExecutorProps {\n  executeInstruction: (instruction: Instruction) => ExecutionResult;\n}\n\nexport function useInstructionExecutor({ executeInstruction }: UseInstructionExecutorProps) {\n  \n  // è§£æAIå“åº”å¹¶æ‰§è¡ŒæŒ‡ä»¤\n  const parseAndExecuteMessage = useCallback((aiMessage: string): ExecutionResult | null => {\n    // æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦åŒ…å«æŒ‡ä»¤\n    if (!hasActionInMessage(aiMessage)) {\n      return null;\n    }\n\n    // è§£æJSONæŒ‡ä»¤\n    const parsedAction: TodoAction | null = safeParseJSON(aiMessage);\n    \n    if (!parsedAction) {\n      console.warn('æ— æ³•è§£æAIè¿”å›çš„æŒ‡ä»¤');\n      return {\n        success: false,\n        message: 'æŒ‡ä»¤æ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ'\n      };\n    }\n\n    // å°†TodoActionè½¬æ¢ä¸ºInstructionæ ¼å¼\n    const instruction: Instruction = {\n      action: parsedAction.action,\n      task: parsedAction.task\n    };\n\n    // æ‰§è¡ŒæŒ‡ä»¤\n    console.log('æ‰§è¡ŒAIæŒ‡ä»¤:', instruction);\n    const result = executeInstruction(instruction);\n    \n    return result;\n  }, [executeInstruction]);\n\n  // æ‰¹é‡å¤„ç†AIæ¶ˆæ¯ä¸­çš„æŒ‡ä»¤\n  const processAIResponse = useCallback((aiMessage: string): ExecutionResult[] => {\n    const results: ExecutionResult[] = [];\n    \n    // æŸ¥æ‰¾æ‰€æœ‰JSONæŒ‡ä»¤\n    const jsonMatches = aiMessage.match(/\\{[^}]*\"action\"[^}]*\\}/g);\n    \n    if (jsonMatches) {\n      jsonMatches.forEach((jsonStr, index) => {\n        try {\n          const parsed = JSON.parse(jsonStr);\n          if (parsed.action && ['add', 'complete', 'delete', 'list', 'clear_completed', 'clear_all'].includes(parsed.action)) {\n            const instruction: Instruction = {\n              action: parsed.action,\n              task: parsed.task\n            };\n            \n            const result = executeInstruction(instruction);\n            results.push(result);\n            \n            console.log(`æ‰§è¡Œç¬¬${index + 1}ä¸ªæŒ‡ä»¤:`, instruction, 'ç»“æœ:', result);\n          }\n        } catch (error) {\n          console.warn('è§£ææŒ‡ä»¤å¤±è´¥:', jsonStr, error);\n          results.push({\n            success: false,\n            message: `æŒ‡ä»¤${index + 1}è§£æå¤±è´¥`\n          });\n        }\n      });\n    }\n    \n    return results;\n  }, [executeInstruction]);\n\n  return {\n    parseAndExecuteMessage,\n    processAIResponse\n  };\n} "],"names":[],"mappings":";;;AAAA;AAEA;;;AAMO,SAAS,uBAAuB,EAAE,kBAAkB,EAA+B;IAExF,cAAc;IACd,MAAM,yBAAyB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAC1C,aAAa;QACb,IAAI,CAAC,CAAA,GAAA,0HAAA,CAAA,qBAAkB,AAAD,EAAE,YAAY;YAClC,OAAO;QACT;QAEA,WAAW;QACX,MAAM,eAAkC,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE;QAEtD,IAAI,CAAC,cAAc;YACjB,QAAQ,IAAI,CAAC;YACb,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,8BAA8B;QAC9B,MAAM,cAA2B;YAC/B,QAAQ,aAAa,MAAM;YAC3B,MAAM,aAAa,IAAI;QACzB;QAEA,OAAO;QACP,QAAQ,GAAG,CAAC,WAAW;QACvB,MAAM,SAAS,mBAAmB;QAElC,OAAO;IACT,GAAG;QAAC;KAAmB;IAEvB,eAAe;IACf,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QACrC,MAAM,UAA6B,EAAE;QAErC,aAAa;QACb,MAAM,cAAc,UAAU,KAAK,CAAC;QAEpC,IAAI,aAAa;YACf,YAAY,OAAO,CAAC,CAAC,SAAS;gBAC5B,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,IAAI,OAAO,MAAM,IAAI;wBAAC;wBAAO;wBAAY;wBAAU;wBAAQ;wBAAmB;qBAAY,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;wBAClH,MAAM,cAA2B;4BAC/B,QAAQ,OAAO,MAAM;4BACrB,MAAM,OAAO,IAAI;wBACnB;wBAEA,MAAM,SAAS,mBAAmB;wBAClC,QAAQ,IAAI,CAAC;wBAEb,QAAQ,GAAG,CAAC,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,aAAa,OAAO;oBACzD;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,IAAI,CAAC,WAAW,SAAS;oBACjC,QAAQ,IAAI,CAAC;wBACX,SAAS;wBACT,SAAS,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC;oBAC/B;gBACF;YACF;QACF;QAEA,OAAO;IACT,GAAG;QAAC;KAAmB;IAEvB,OAAO;QACL;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/hooks/useMemory.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\n\n// è®°å¿†æ¡ç›®æ¥å£\nexport interface MemoryEntry {\n  id: string;\n  timestamp: number;\n  type: 'user_message' | 'ai_response' | 'action_executed' | 'context_reference';\n  content: string;\n  metadata?: {\n    action?: string;\n    taskId?: number;\n    taskText?: string;\n    reference?: string;\n  };\n}\n\n// ä¸Šä¸‹æ–‡ç±»å‹\nexport interface Context {\n  recentActions: Array<{\n    action: string;\n    taskId?: number;\n    taskText?: string;\n    timestamp: number;\n  }>;\n  lastAddedTask?: {\n    id: number;\n    text: string;\n    timestamp: number;\n  };\n  recentMessages: Array<{\n    content: string;\n    timestamp: number;\n    type: 'user' | 'ai';\n  }>;\n}\n\nexport function useMemory() {\n  const [memory, setMemory] = useState<MemoryEntry[]>([]);\n  const [context, setContext] = useState<Context>({\n    recentActions: [],\n    recentMessages: []\n  });\n\n  // æ·»åŠ è®°å¿†æ¡ç›®\n  const addMemoryEntry = useCallback((entry: Omit<MemoryEntry, 'id' | 'timestamp'>) => {\n    const newEntry: MemoryEntry = {\n      ...entry,\n      id: `mem_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: Date.now()\n    };\n    \n    setMemory(prev => [...prev.slice(-49), newEntry]); // ä¿æŒæœ€è¿‘50æ¡è®°å½•\n    return newEntry;\n  }, []);\n\n  // è®°å½•ç”¨æˆ·æ¶ˆæ¯\n  const recordUserMessage = useCallback((message: string) => {\n    addMemoryEntry({\n      type: 'user_message',\n      content: message\n    });\n\n    // æ›´æ–°ä¸Šä¸‹æ–‡ä¸­çš„æœ€è¿‘æ¶ˆæ¯\n    setContext(prev => ({\n      ...prev,\n      recentMessages: [\n        ...prev.recentMessages.slice(-9), // ä¿æŒæœ€è¿‘10æ¡æ¶ˆæ¯\n        {\n          content: message,\n          timestamp: Date.now(),\n          type: 'user'\n        }\n      ]\n    }));\n  }, [addMemoryEntry]);\n\n  // è®°å½•AIå›å¤\n  const recordAIResponse = useCallback((response: string) => {\n    addMemoryEntry({\n      type: 'ai_response',\n      content: response\n    });\n\n    // æ›´æ–°ä¸Šä¸‹æ–‡ä¸­çš„æœ€è¿‘æ¶ˆæ¯\n    setContext(prev => ({\n      ...prev,\n      recentMessages: [\n        ...prev.recentMessages.slice(-9),\n        {\n          content: response,\n          timestamp: Date.now(),\n          type: 'ai'\n        }\n      ]\n    }));\n  }, [addMemoryEntry]);\n\n  // è®°å½•æ‰§è¡Œçš„åŠ¨ä½œ\n  const recordAction = useCallback((action: string, taskId?: number, taskText?: string) => {\n    addMemoryEntry({\n      type: 'action_executed',\n      content: `æ‰§è¡ŒåŠ¨ä½œ: ${action}${taskText ? ` - ${taskText}` : ''}`,\n      metadata: {\n        action,\n        taskId,\n        taskText\n      }\n    });\n\n    // æ›´æ–°ä¸Šä¸‹æ–‡ä¸­çš„æœ€è¿‘åŠ¨ä½œ\n    setContext(prev => ({\n      ...prev,\n      recentActions: [\n        ...prev.recentActions.slice(-9), // ä¿æŒæœ€è¿‘10ä¸ªåŠ¨ä½œ\n        {\n          action,\n          taskId,\n          taskText,\n          timestamp: Date.now()\n        }\n      ],\n      // å¦‚æœæ˜¯æ·»åŠ ä»»åŠ¡ï¼Œæ›´æ–°æœ€åæ·»åŠ çš„ä»»åŠ¡\n      ...(action === 'add' && taskId && taskText ? {\n        lastAddedTask: {\n          id: taskId,\n          text: taskText,\n          timestamp: Date.now()\n        }\n      } : {})\n    }));\n  }, [addMemoryEntry]);\n\n  // è®°å½•ä¸Šä¸‹æ–‡å¼•ç”¨\n  const recordContextReference = useCallback((reference: string, content: string) => {\n    addMemoryEntry({\n      type: 'context_reference',\n      content,\n      metadata: {\n        reference\n      }\n    });\n  }, [addMemoryEntry]);\n\n  // è§£æä¸Šä¸‹æ–‡å¼•ç”¨ï¼ˆå¦‚\"åˆšæ‰é‚£ä¸ª\"ã€\"æœ€åä¸€ä¸ª\"ç­‰ï¼‰\n  const resolveContextReference = useCallback((userInput: string) => {\n    const input = userInput.toLowerCase();\n    let resolvedContext = '';\n    \n    // æ£€æŸ¥æ˜¯å¦å¼•ç”¨äº†\"åˆšæ‰\"ã€\"æœ€å\"ã€\"ä¸Šä¸€ä¸ª\"ç­‰\n    if (input.includes('åˆšæ‰') || input.includes('æœ€å') || input.includes('ä¸Šä¸€ä¸ª') || input.includes('ä¸Šä¸ª')) {\n      if (input.includes('æ·»åŠ ') || input.includes('ä»»åŠ¡')) {\n        // å¼•ç”¨æœ€åæ·»åŠ çš„ä»»åŠ¡\n        if (context.lastAddedTask) {\n          resolvedContext = `å¼•ç”¨æœ€åæ·»åŠ çš„ä»»åŠ¡: \"${context.lastAddedTask.text}\" (ID: ${context.lastAddedTask.id})`;\n          recordContextReference('last_added_task', resolvedContext);\n          return {\n            type: 'task_reference',\n            taskId: context.lastAddedTask.id,\n            taskText: context.lastAddedTask.text,\n            resolvedText: resolvedContext\n          };\n        }\n      } else {\n        // å¼•ç”¨æœ€åçš„åŠ¨ä½œ\n        const lastAction = context.recentActions[context.recentActions.length - 1];\n        if (lastAction) {\n          resolvedContext = `å¼•ç”¨æœ€åçš„åŠ¨ä½œ: ${lastAction.action}${lastAction.taskText ? ` - ${lastAction.taskText}` : ''}`;\n          recordContextReference('last_action', resolvedContext);\n          return {\n            type: 'action_reference',\n            action: lastAction.action,\n            taskId: lastAction.taskId,\n            taskText: lastAction.taskText,\n            resolvedText: resolvedContext\n          };\n        }\n      }\n    }\n\n    // æ£€æŸ¥æ˜¯å¦å¼•ç”¨äº†\"å†\"ã€\"å†åŠ \"ç­‰\n    if (input.includes('å†åŠ ') || input.includes('å†æ·»åŠ ')) {\n      const lastAddAction = context.recentActions\n        .slice()\n        .reverse()\n        .find(action => action.action === 'add');\n      \n      if (lastAddAction) {\n        resolvedContext = `åŸºäºä¸Šæ¬¡æ·»åŠ çš„ä»»åŠ¡æ¨¡å¼: \"${lastAddAction.taskText}\"`;\n        recordContextReference('repeat_add_pattern', resolvedContext);\n        return {\n          type: 'repeat_pattern',\n          action: 'add',\n          referenceTask: lastAddAction.taskText,\n          resolvedText: resolvedContext\n        };\n      }\n    }\n\n    return null;\n  }, [context, recordContextReference]);\n\n  // è·å–ä¸Šä¸‹æ–‡æ‘˜è¦ï¼ˆç”¨äºå‘é€ç»™AIï¼‰\n  const getContextSummary = useCallback(() => {\n    const recentMessages = context.recentMessages.slice(-6); // æœ€è¿‘3è½®å¯¹è¯\n    const recentActions = context.recentActions.slice(-5); // æœ€è¿‘5ä¸ªåŠ¨ä½œ\n    \n    let summary = '';\n    \n    if (recentMessages.length > 0) {\n      summary += 'æœ€è¿‘çš„å¯¹è¯:\\n';\n      recentMessages.forEach(msg => {\n        summary += `${msg.type === 'user' ? 'ç”¨æˆ·' : 'AI'}: ${msg.content}\\n`;\n      });\n      summary += '\\n';\n    }\n    \n    if (recentActions.length > 0) {\n      summary += 'æœ€è¿‘çš„æ“ä½œ:\\n';\n      recentActions.forEach(action => {\n        summary += `${action.action}: ${action.taskText || 'æ— å…·ä½“ä»»åŠ¡'}\\n`;\n      });\n      summary += '\\n';\n    }\n    \n    if (context.lastAddedTask) {\n      summary += `æœ€åæ·»åŠ çš„ä»»åŠ¡: \"${context.lastAddedTask.text}\" (ID: ${context.lastAddedTask.id})\\n`;\n    }\n    \n    return summary;\n  }, [context]);\n\n  // æ¸…é™¤è®°å¿†ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰\n  const clearMemory = useCallback(() => {\n    setMemory([]);\n    setContext({\n      recentActions: [],\n      recentMessages: []\n    });\n  }, []);\n\n  return {\n    memory,\n    context,\n    addMemoryEntry,\n    recordUserMessage,\n    recordAIResponse,\n    recordAction,\n    recordContextReference,\n    resolveContextReference,\n    getContextSummary,\n    clearMemory\n  };\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/components/ChatSidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { useChat } from 'ai/react';\nimport { useInstructionExecutor } from '../hooks/useInstructionExecutor';\nimport { useMemory } from '../hooks/useMemory';\nimport { Instruction, ExecutionResult } from '../utils/instructionMapper';\n\ninterface ChatSidebarProps {\n  executeInstruction: (instruction: Instruction) => ExecutionResult;\n}\n\nexport default function ChatSidebar({ executeInstruction }: ChatSidebarProps) {\n  const [showMemory, setShowMemory] = useState(false);\n  const [executionResults, setExecutionResults] = useState<Array<{id: string, message: string, success: boolean, timestamp: number}>>([]);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  \n  // ä½¿ç”¨è®°å¿†hook\n  const {\n    memory,\n    context,\n    recordUserMessage,\n    recordAIResponse,\n    resolveContextReference,\n    getContextSummary,\n    clearMemory\n  } = useMemory();\n  \n  // ä½¿ç”¨æŒ‡ä»¤æ‰§è¡Œå™¨\n  const { parseAndExecuteMessage } = useInstructionExecutor({ executeInstruction });\n\n  // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [memory, executionResults]);\n\n  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({\n    api: '/api/chat',\n    onFinish: (message) => {\n      console.log('AI å›å¤å®Œæˆ:', message.content);\n      console.log('å¼€å§‹è§£æå’Œæ‰§è¡ŒæŒ‡ä»¤...');\n      \n      // è®°å½•AIå›å¤\n      recordAIResponse(message.content);\n      \n      // å°è¯•æ‰§è¡ŒAIå›å¤ä¸­çš„æŒ‡ä»¤\n      const result = parseAndExecuteMessage(message.content);\n      if (result) {\n        console.log('æŒ‡ä»¤æ‰§è¡Œç»“æœ:', result);\n        \n        // æ·»åŠ æ‰§è¡Œç»“æœåˆ°çŠ¶æ€\n        setExecutionResults(prev => [...prev.slice(-9), {\n          id: `result_${Date.now()}`,\n          message: result.message || 'æ‰§è¡Œå®Œæˆ',\n          success: result.success,\n          timestamp: Date.now()\n        }]);\n      } else {\n        console.log('æ²¡æœ‰æ‰¾åˆ°å¯æ‰§è¡Œçš„æŒ‡ä»¤');\n      }\n    }\n  });\n\n  // å¤„ç†è¡¨å•æäº¤ï¼Œæ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯\n  const handleFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    \n    if (!input.trim() || isLoading) return;\n    \n    const userInput = input.trim();\n    \n    // è®°å½•ç”¨æˆ·æ¶ˆæ¯\n    recordUserMessage(userInput);\n    \n    // è§£æä¸Šä¸‹æ–‡å¼•ç”¨\n    const contextRef = resolveContextReference(userInput);\n    \n    // è·å–ä¸Šä¸‹æ–‡æ‘˜è¦\n    const contextSummary = getContextSummary();\n    \n    // æ„å»ºå¢å¼ºçš„æç¤ºè¯\n    let enhancedPrompt = userInput;\n    \n    if (contextRef) {\n      enhancedPrompt = `ç”¨æˆ·æ¶ˆæ¯: ${userInput}\\n\\nä¸Šä¸‹æ–‡è§£æ: ${contextRef.resolvedText}\\n`;\n      \n      // å¦‚æœæ˜¯ä»»åŠ¡å¼•ç”¨ï¼Œæ·»åŠ å…·ä½“ä¿¡æ¯\n      if (contextRef.type === 'task_reference' && contextRef.taskId) {\n        enhancedPrompt += `å¼•ç”¨çš„ä»»åŠ¡ID: ${contextRef.taskId}\\n`;\n      }\n    }\n    \n    if (contextSummary) {\n      enhancedPrompt += `\\nå†å²ä¸Šä¸‹æ–‡:\\n${contextSummary}`;\n    }\n    \n    enhancedPrompt += `\\nè¯·åŸºäºä»¥ä¸Šä¸Šä¸‹æ–‡ç†è§£ç”¨æˆ·çš„çœŸå®æ„å›¾ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„æ“ä½œæŒ‡ä»¤ã€‚`;\n    \n    // è°ƒç”¨åŸå§‹çš„handleSubmitï¼Œä½†å…ˆä¿®æ”¹inputå€¼\n    handleInputChange({ target: { value: enhancedPrompt } } as React.ChangeEvent<HTMLInputElement>);\n    \n    // ç«‹å³æäº¤è¡¨å•\n    setTimeout(() => {\n      handleSubmit(e);\n      // æ¢å¤æ˜¾ç¤ºåŸå§‹è¾“å…¥\n      handleInputChange({ target: { value: '' } } as React.ChangeEvent<HTMLInputElement>);\n    }, 0);\n  };\n\n  const formatTimestamp = (timestamp: number) => {\n    return new Date(timestamp).toLocaleTimeString('zh-CN', { \n      hour: '2-digit', \n      minute: '2-digit',\n      second: '2-digit'\n    });\n  };\n\n  const getMemoryTypeLabel = (type: string) => {\n    switch (type) {\n      case 'user_message': return 'ğŸ’¬ ç”¨æˆ·';\n      case 'ai_response': return 'ğŸ¤– AI';\n      case 'action_executed': return 'âš¡ æ‰§è¡Œ';\n      case 'context_reference': return 'ğŸ”— å¼•ç”¨';\n      default: return 'ğŸ“';\n    }\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg h-full flex flex-col\">\n      {/* å¤´éƒ¨ */}\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-gray-800 dark:text-white\">\n            ğŸ¤– AI åŠ©æ‰‹\n          </h2>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setShowMemory(!showMemory)}\n              className={`px-3 py-1 text-xs rounded-full transition-colors ${\n                showMemory \n                  ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\n                  : 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400'\n              }`}\n              title=\"åˆ‡æ¢è®°å¿†è§†å›¾\"\n            >\n              {showMemory ? 'ğŸ’¬ å¯¹è¯' : 'ğŸ§  è®°å¿†'}\n            </button>\n            {memory.length > 0 && (\n              <button\n                onClick={clearMemory}\n                className=\"px-3 py-1 text-xs bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition-colors\"\n                title=\"æ¸…é™¤è®°å¿†\"\n              >\n                ğŸ—‘ï¸\n              </button>\n            )}\n          </div>\n        </div>\n        \n        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n          æ”¯æŒä¸Šä¸‹æ–‡å¯¹è¯ | è®°å¿†æ¡ç›®: {memory.length}\n        </p>\n        \n        {context.lastAddedTask && (\n          <div className=\"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-xs\">\n            <span className=\"text-blue-600 dark:text-blue-400\">\n              ğŸ’¡ æœ€åæ·»åŠ : &ldquo;{context.lastAddedTask.text}&rdquo;\n            </span>\n          </div>\n        )}\n      </div>\n\n      {/* å†…å®¹åŒºåŸŸ */}\n      <div className=\"flex-1 p-4 overflow-y-auto\">\n        {showMemory ? (\n          // è®°å¿†è§†å›¾\n          <div className=\"space-y-2\">\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n              ğŸ“ å¯¹è¯è®°å¿†\n            </h3>\n            {memory.length === 0 ? (\n              <p className=\"text-gray-500 dark:text-gray-400 text-sm text-center py-4\">\n                æš‚æ— è®°å¿†è®°å½•\n              </p>\n            ) : (\n              memory.map((entry) => (\n                <div\n                  key={entry.id}\n                  className={`p-2 rounded-lg text-xs ${\n                    entry.type === 'user_message'\n                      ? 'bg-blue-50 dark:bg-blue-900/20 border-l-2 border-blue-300'\n                      : entry.type === 'ai_response'\n                      ? 'bg-green-50 dark:bg-green-900/20 border-l-2 border-green-300'\n                      : entry.type === 'action_executed'\n                      ? 'bg-yellow-50 dark:bg-yellow-900/20 border-l-2 border-yellow-300'\n                      : 'bg-purple-50 dark:bg-purple-900/20 border-l-2 border-purple-300'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span className=\"font-medium\">\n                      {getMemoryTypeLabel(entry.type)}\n                    </span>\n                    <span className=\"text-gray-400\">\n                      {formatTimestamp(entry.timestamp)}\n                    </span>\n                  </div>\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    {entry.content}\n                  </p>\n                  {entry.metadata && (\n                    <div className=\"mt-1 text-gray-500\">\n                      {entry.metadata.action && (\n                        <span>åŠ¨ä½œ: {entry.metadata.action}</span>\n                      )}\n                      {entry.metadata.taskId && (\n                        <span> | ID: {entry.metadata.taskId}</span>\n                      )}\n                    </div>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n        ) : (\n          // å¯¹è¯è§†å›¾\n          <div className=\"space-y-4\">\n            {messages.length === 0 ? (\n              <div className=\"text-center py-4\">\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-2\">\n                  ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹\n                </p>\n                <p className=\"text-xs text-gray-400 dark:text-gray-500\">\n                  æˆ‘å¯ä»¥å¸®ä½ ç®¡ç†å¾…åŠäº‹é¡¹ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š\n                </p>\n                <div className=\"mt-2 text-xs text-gray-400 space-y-1\">\n                  <p>âœ… &ldquo;å¸®æˆ‘æ·»åŠ ä¸€ä¸ªå­¦ä¹ ä»»åŠ¡&rdquo;</p>\n                  <p>ğŸ”„ &ldquo;å†åŠ ä¸€ä¸ªç±»ä¼¼çš„ä»»åŠ¡&rdquo;</p>\n                  <p>âœ… &ldquo;å®Œæˆåˆšæ‰é‚£ä¸ªä»»åŠ¡&rdquo;</p>\n                  <p>ğŸ—‘ï¸ &ldquo;æŠŠæœ€åæ·»åŠ çš„åˆ äº†&rdquo;</p>\n                  <p>ğŸ“‹ &ldquo;æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡&rdquo;</p>\n                </div>\n              </div>\n            ) : (\n              messages.map((message) => (\n                <div\n                  key={message.id}\n                  className={`flex ${\n                    message.role === 'user' ? 'justify-end' : 'justify-start'\n                  }`}\n                >\n                  <div\n                    className={`max-w-[80%] p-3 rounded-lg text-sm ${\n                      message.role === 'user'\n                        ? 'bg-blue-500 text-white'\n                        : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'\n                    }`}\n                  >\n                    {/* åªæ˜¾ç¤ºç”¨æˆ·åŸå§‹è¾“å…¥ï¼Œä¸æ˜¾ç¤ºå¢å¼ºåçš„æç¤ºè¯ */}\n                    {message.role === 'user' ? (\n                      message.content.split('\\n')[0].replace('ç”¨æˆ·æ¶ˆæ¯: ', '')\n                    ) : (\n                      message.content\n                    )}\n                  </div>\n                </div>\n              ))\n            )}\n            \n            {/* æ˜¾ç¤ºæ‰§è¡Œç»“æœ */}\n            {executionResults.map((result) => (\n              <div key={result.id} className=\"flex justify-center\">\n                <div className={`max-w-[90%] px-3 py-2 rounded-lg text-sm border ${\n                  result.success \n                    ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700 text-green-800 dark:text-green-300'\n                    : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700 text-red-800 dark:text-red-300'\n                }`}>\n                  <div className=\"flex items-center gap-2\">\n                    <span>{result.success ? 'âœ…' : 'âŒ'}</span>\n                    <span className=\"font-medium\">æŒ‡ä»¤æ‰§è¡Œ:</span>\n                    <span>{result.message}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {isLoading && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white p-3 rounded-lg text-sm\">\n                  <div className=\"flex items-center space-x-1\">\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            <div ref={messagesEndRef} />\n          </div>\n        )}\n      </div>\n\n      {/* è¾“å…¥åŒºåŸŸ */}\n      <div className=\"p-4 border-t border-gray-200 dark:border-gray-700\">\n        <form onSubmit={handleFormSubmit} className=\"space-y-2\">\n          <div className=\"flex gap-2\">\n            <input\n              value={input}\n              onChange={handleInputChange}\n              placeholder=\"è¾“å…¥æ¶ˆæ¯ï¼Œæ”¯æŒä¸Šä¸‹æ–‡å¼•ç”¨...\"\n              className=\"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n              disabled={isLoading}\n            />\n            <button\n              type=\"submit\"\n              disabled={isLoading || !input.trim()}\n              className=\"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium\"\n            >\n              {isLoading ? 'â³' : 'å‘é€'}\n            </button>\n          </div>\n          \n          {/* å¿«æ·è¾“å…¥å»ºè®® */}\n          <div className=\"flex flex-wrap gap-1\">\n            {[\n              'å†åŠ ä¸€ä¸ªä»»åŠ¡',\n              'å®Œæˆåˆšæ‰é‚£ä¸ª',\n              'åˆ é™¤æœ€åä¸€ä¸ª',\n              'æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡'\n            ].map((suggestion) => (\n              <button\n                key={suggestion}\n                type=\"button\"\n                onClick={() => {\n                  handleInputChange({ target: { value: suggestion } } as React.ChangeEvent<HTMLInputElement>);\n                }}\n                className=\"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded transition-colors\"\n                disabled={isLoading}\n              >\n                {suggestion}\n              </button>\n            ))}\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 975, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/utils/instructionMapper.ts"],"sourcesContent":["// å®šä¹‰æŒ‡ä»¤ç±»å‹\nexport interface Instruction {\n  action: 'add' | 'complete' | 'delete' | 'list' | 'clear_completed' | 'clear_all';\n  task?: string;\n  id?: number;\n  response?: string;\n}\n\n// å®šä¹‰å¾…åŠäº‹é¡¹ç±»å‹\nexport interface Todo {\n  id: number;\n  text: string;\n  completed: boolean;\n}\n\n// å®šä¹‰æ‰§è¡Œç»“æœç±»å‹\nexport interface ExecutionResult {\n  success: boolean;\n  message?: string;\n  data?: Todo[] | Todo | boolean;\n}\n\n// å®šä¹‰å‡½æ•°æ˜ å°„è¡¨ç±»å‹\nexport type TodoFunction = (params?: string | number | undefined) => ExecutionResult | Todo[] | boolean | void;\n\n// æŒ‡ä»¤æ˜ å°„å™¨ç±»\nexport class InstructionMapper {\n  private functionMap: Map<string, TodoFunction>;\n  \n  constructor() {\n    this.functionMap = new Map();\n  }\n\n  // æ³¨å†Œå‡½æ•°åˆ°æ˜ å°„è¡¨\n  registerFunction(action: string, func: TodoFunction) {\n    this.functionMap.set(action, func);\n  }\n\n  // æ‰§è¡ŒæŒ‡ä»¤æ˜ å°„çš„å‡½æ•°\n  executeInstruction(instruction: Instruction): ExecutionResult {\n    const func = this.functionMap.get(instruction.action);\n    \n    if (!func) {\n      console.warn(`æœªæ‰¾åˆ°æ“ä½œ \"${instruction.action}\" å¯¹åº”çš„å‡½æ•°`);\n      return { \n        success: false, \n        message: `ä¸æ”¯æŒçš„æ“ä½œ: ${instruction.action}` \n      };\n    }\n\n    try {\n      // æ ¹æ®ä¸åŒçš„æ“ä½œç±»å‹ä¼ é€’ä¸åŒçš„å‚æ•°\n      let result: ExecutionResult | Todo[] | boolean | void;\n      \n      switch (instruction.action) {\n        case 'add':\n          result = func(instruction.task);\n          break;\n        case 'complete':\n        case 'delete':\n          result = func(instruction.id || instruction.task);\n          break;\n        case 'list':\n        case 'clear_completed':\n        case 'clear_all':\n          result = func();\n          break;\n        default:\n          result = func();\n      }\n\n      // æ ‡å‡†åŒ–è¿”å›ç»“æœ\n      if (typeof result === 'object' && result !== null && 'success' in result) {\n        return result as ExecutionResult;\n      } else {\n        return {\n          success: true,\n          message: `æ“ä½œ \"${instruction.action}\" æ‰§è¡ŒæˆåŠŸ`,\n          data: result as Todo[] | Todo | boolean\n        };\n      }\n    } catch (error) {\n      console.error('æ‰§è¡ŒæŒ‡ä»¤æ—¶å‘ç”Ÿé”™è¯¯:', error);\n      return { \n        success: false, \n        message: `æ‰§è¡Œæ“ä½œ \"${instruction.action}\" æ—¶å‘ç”Ÿé”™è¯¯` \n      };\n    }\n  }\n\n  // è·å–æ‰€æœ‰æ³¨å†Œçš„å‡½æ•°\n  getRegisteredActions(): string[] {\n    return Array.from(this.functionMap.keys());\n  }\n\n  // æ£€æŸ¥æ˜¯å¦æ”¯æŒæŸä¸ªæ“ä½œ\n  supportsAction(action: string): boolean {\n    return this.functionMap.has(action);\n  }\n}\n\n// åˆ›å»ºå…¨å±€å®ä¾‹\nexport const instructionMapper = new InstructionMapper();\n\n// è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®ä»»åŠ¡åç§°æŸ¥æ‰¾todoé¡¹\nexport function findTodoByText(todos: Todo[], taskText: string): Todo | undefined {\n  return todos.find(todo => \n    todo.text.toLowerCase().includes(taskText.toLowerCase()) ||\n    taskText.toLowerCase().includes(todo.text.toLowerCase())\n  );\n}\n\n// è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®IDæŸ¥æ‰¾todoé¡¹\nexport function findTodoById(todos: Todo[], id: number): Todo | undefined {\n  return todos.find(todo => todo.id === id);\n} "],"names":[],"mappings":"AAAA,SAAS;;;;;;;AA0BF,MAAM;IACH,YAAuC;IAE/C,aAAc;QACZ,IAAI,CAAC,WAAW,GAAG,IAAI;IACzB;IAEA,WAAW;IACX,iBAAiB,MAAc,EAAE,IAAkB,EAAE;QACnD,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ;IAC/B;IAEA,YAAY;IACZ,mBAAmB,WAAwB,EAAmB;QAC5D,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,YAAY,MAAM;QAEpD,IAAI,CAAC,MAAM;YACT,QAAQ,IAAI,CAAC,CAAC,OAAO,EAAE,YAAY,MAAM,CAAC,OAAO,CAAC;YAClD,OAAO;gBACL,SAAS;gBACT,SAAS,CAAC,QAAQ,EAAE,YAAY,MAAM,EAAE;YAC1C;QACF;QAEA,IAAI;YACF,mBAAmB;YACnB,IAAI;YAEJ,OAAQ,YAAY,MAAM;gBACxB,KAAK;oBACH,SAAS,KAAK,YAAY,IAAI;oBAC9B;gBACF,KAAK;gBACL,KAAK;oBACH,SAAS,KAAK,YAAY,EAAE,IAAI,YAAY,IAAI;oBAChD;gBACF,KAAK;gBACL,KAAK;gBACL,KAAK;oBACH,SAAS;oBACT;gBACF;oBACE,SAAS;YACb;YAEA,UAAU;YACV,IAAI,OAAO,WAAW,YAAY,WAAW,QAAQ,aAAa,QAAQ;gBACxE,OAAO;YACT,OAAO;gBACL,OAAO;oBACL,SAAS;oBACT,SAAS,CAAC,IAAI,EAAE,YAAY,MAAM,CAAC,MAAM,CAAC;oBAC1C,MAAM;gBACR;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,OAAO;gBACL,SAAS;gBACT,SAAS,CAAC,MAAM,EAAE,YAAY,MAAM,CAAC,OAAO,CAAC;YAC/C;QACF;IACF;IAEA,YAAY;IACZ,uBAAiC;QAC/B,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI;IACzC;IAEA,aAAa;IACb,eAAe,MAAc,EAAW;QACtC,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;IAC9B;AACF;AAGO,MAAM,oBAAoB,IAAI;AAG9B,SAAS,eAAe,KAAa,EAAE,QAAgB;IAC5D,OAAO,MAAM,IAAI,CAAC,CAAA,OAChB,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,WAAW,OACrD,SAAS,WAAW,GAAG,QAAQ,CAAC,KAAK,IAAI,CAAC,WAAW;AAEzD;AAGO,SAAS,aAAa,KAAa,EAAE,EAAU;IACpD,OAAO,MAAM,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;AACxC","debugId":null}},
    {"offset": {"line": 1060, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/hooks/useInstructionMapping.ts"],"sourcesContent":["import { useCallback, useEffect } from 'react';\nimport { instructionMapper, Instruction, Todo, ExecutionResult, findTodoByText } from '../utils/instructionMapper';\n\ninterface UseInstructionMappingProps {\n  todos: Todo[];\n  setTodos: (todos: Todo[]) => void;\n  // æ·»åŠ è®°å¿†å›è°ƒå‡½æ•°\n  onActionExecuted?: (action: string, taskId?: number, taskText?: string) => void;\n}\n\nexport function useInstructionMapping({ todos, setTodos, onActionExecuted }: UseInstructionMappingProps) {\n  \n  // æ·»åŠ å¾…åŠäº‹é¡¹å‡½æ•°\n  const addTodoFunction = useCallback((taskText?: string | number): ExecutionResult => {\n    const task = typeof taskText === 'string' ? taskText : String(taskText || '');\n    \n    if (!task || task.trim() === '') {\n      return {\n        success: false,\n        message: 'ä»»åŠ¡å†…å®¹ä¸èƒ½ä¸ºç©º'\n      };\n    }\n\n    const newTodo: Todo = {\n      id: Date.now(),\n      text: task.trim(),\n      completed: false,\n    };\n    \n    setTodos([...todos, newTodo]);\n    \n    // è®°å½•åˆ°è®°å¿†ä¸­\n    onActionExecuted?.('add', newTodo.id, newTodo.text);\n    \n    return {\n      success: true,\n      message: `å·²æ·»åŠ ä»»åŠ¡: ${task}`,\n      data: newTodo\n    };\n  }, [todos, setTodos, onActionExecuted]);\n\n  // å®Œæˆå¾…åŠäº‹é¡¹å‡½æ•°\n  const completeTodoFunction = useCallback((taskIdentifier?: string | number): ExecutionResult => {\n    if (!taskIdentifier) {\n      return {\n        success: false,\n        message: 'è¯·æŒ‡å®šè¦å®Œæˆçš„ä»»åŠ¡'\n      };\n    }\n\n    let targetTodo: Todo | undefined;\n    \n    if (typeof taskIdentifier === 'number') {\n      targetTodo = todos.find(todo => todo.id === taskIdentifier);\n    } else {\n      targetTodo = findTodoByText(todos, taskIdentifier);\n    }\n\n    if (!targetTodo) {\n      return {\n        success: false,\n        message: `æœªæ‰¾åˆ°ä»»åŠ¡: ${taskIdentifier}`\n      };\n    }\n\n    if (targetTodo.completed) {\n      return {\n        success: false,\n        message: `ä»»åŠ¡ \"${targetTodo.text}\" å·²ç»å®Œæˆäº†`\n      };\n    }\n\n    const updatedTodos = todos.map(todo =>\n      todo.id === targetTodo!.id ? { ...todo, completed: true } : todo\n    );\n    \n    setTodos(updatedTodos);\n    \n    // è®°å½•åˆ°è®°å¿†ä¸­\n    onActionExecuted?.('complete', targetTodo.id, targetTodo.text);\n    \n    return {\n      success: true,\n      message: `å·²å®Œæˆä»»åŠ¡: ${targetTodo.text}`,\n      data: { ...targetTodo, completed: true }\n    };\n  }, [todos, setTodos, onActionExecuted]);\n\n  // åˆ é™¤å¾…åŠäº‹é¡¹å‡½æ•°\n  const deleteTodoFunction = useCallback((taskIdentifier?: string | number): ExecutionResult => {\n    if (!taskIdentifier) {\n      return {\n        success: false,\n        message: 'è¯·æŒ‡å®šè¦åˆ é™¤çš„ä»»åŠ¡'\n      };\n    }\n\n    let targetTodo: Todo | undefined;\n    \n    if (typeof taskIdentifier === 'number') {\n      targetTodo = todos.find(todo => todo.id === taskIdentifier);\n    } else {\n      targetTodo = findTodoByText(todos, taskIdentifier);\n    }\n\n    if (!targetTodo) {\n      return {\n        success: false,\n        message: `æœªæ‰¾åˆ°ä»»åŠ¡: ${taskIdentifier}`\n      };\n    }\n\n    const updatedTodos = todos.filter(todo => todo.id !== targetTodo!.id);\n    setTodos(updatedTodos);\n    \n    // è®°å½•åˆ°è®°å¿†ä¸­\n    onActionExecuted?.('delete', targetTodo.id, targetTodo.text);\n    \n    return {\n      success: true,\n      message: `å·²åˆ é™¤ä»»åŠ¡: ${targetTodo.text}`,\n      data: targetTodo\n    };\n  }, [todos, setTodos, onActionExecuted]);\n\n  // åˆ—å‡ºæ‰€æœ‰å¾…åŠäº‹é¡¹å‡½æ•°\n  const listTodosFunction = useCallback((): ExecutionResult => {\n    const completedCount = todos.filter(todo => todo.completed).length;\n    const pendingCount = todos.length - completedCount;\n    \n    // è®°å½•åˆ°è®°å¿†ä¸­\n    onActionExecuted?.('list');\n    \n    return {\n      success: true,\n      message: `å…±æœ‰ ${todos.length} ä¸ªä»»åŠ¡ï¼Œå…¶ä¸­ ${completedCount} ä¸ªå·²å®Œæˆï¼Œ${pendingCount} ä¸ªå¾…å®Œæˆ`,\n      data: todos\n    };\n  }, [todos, onActionExecuted]);\n\n  // æ¸…é™¤å·²å®Œæˆä»»åŠ¡å‡½æ•°\n  const clearCompletedFunction = useCallback((): ExecutionResult => {\n    const completedTodos = todos.filter(todo => todo.completed);\n    \n    if (completedTodos.length === 0) {\n      return {\n        success: false,\n        message: 'æ²¡æœ‰å·²å®Œæˆçš„ä»»åŠ¡éœ€è¦æ¸…é™¤'\n      };\n    }\n\n    const updatedTodos = todos.filter(todo => !todo.completed);\n    setTodos(updatedTodos);\n    \n    // è®°å½•åˆ°è®°å¿†ä¸­\n    onActionExecuted?.('clear_completed');\n    \n    return {\n      success: true,\n      message: `å·²æ¸…é™¤ ${completedTodos.length} ä¸ªå·²å®Œæˆçš„ä»»åŠ¡`,\n      data: completedTodos\n    };\n  }, [todos, setTodos, onActionExecuted]);\n\n  // æ¸…é™¤æ‰€æœ‰ä»»åŠ¡å‡½æ•°\n  const clearAllFunction = useCallback((): ExecutionResult => {\n    if (todos.length === 0) {\n      return {\n        success: false,\n        message: 'æ²¡æœ‰ä»»åŠ¡éœ€è¦æ¸…é™¤'\n      };\n    }\n\n    const clearedCount = todos.length;\n    setTodos([]);\n    \n    // è®°å½•åˆ°è®°å¿†ä¸­\n    onActionExecuted?.('clear_all');\n    \n    return {\n      success: true,\n      message: `å·²æ¸…é™¤æ‰€æœ‰ ${clearedCount} ä¸ªä»»åŠ¡`,\n      data: todos\n    };\n  }, [todos, setTodos, onActionExecuted]);\n\n  // æ³¨å†Œæ‰€æœ‰å‡½æ•°åˆ°æ˜ å°„å™¨\n  useEffect(() => {\n    instructionMapper.registerFunction('add', addTodoFunction);\n    instructionMapper.registerFunction('complete', completeTodoFunction);\n    instructionMapper.registerFunction('delete', deleteTodoFunction);\n    instructionMapper.registerFunction('list', listTodosFunction);\n    instructionMapper.registerFunction('clear_completed', clearCompletedFunction);\n    instructionMapper.registerFunction('clear_all', clearAllFunction);\n  }, [\n    addTodoFunction,\n    completeTodoFunction,\n    deleteTodoFunction,\n    listTodosFunction,\n    clearCompletedFunction,\n    clearAllFunction\n  ]);\n\n  // æ‰§è¡ŒæŒ‡ä»¤çš„ä¸»å‡½æ•°\n  const executeInstruction = useCallback((instruction: Instruction): ExecutionResult => {\n    console.log('æ‰§è¡ŒæŒ‡ä»¤:', instruction);\n    const result = instructionMapper.executeInstruction(instruction);\n    console.log('æ‰§è¡Œç»“æœ:', result);\n    return result;\n  }, []);\n\n  // è·å–æ”¯æŒçš„æ“ä½œåˆ—è¡¨\n  const getSupportedActions = useCallback((): string[] => {\n    return instructionMapper.getRegisteredActions();\n  }, []);\n\n  return {\n    executeInstruction,\n    getSupportedActions,\n    // ç›´æ¥å¯¼å‡ºå„ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿ç»„ä»¶å¯ä»¥ç›´æ¥è°ƒç”¨\n    addTodo: addTodoFunction,\n    completeTodo: completeTodoFunction,\n    deleteTodo: deleteTodoFunction,\n    listTodos: listTodosFunction,\n    clearCompleted: clearCompletedFunction,\n    clearAll: clearAllFunction\n  };\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1283, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Desktop/agent-example/examples/06-context-memory/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport ChatSidebar from './components/ChatSidebar';\nimport { Todo } from './utils/instructionMapper';\nimport { useInstructionMapping } from './hooks/useInstructionMapping';\nimport { useMemory } from './hooks/useMemory';\n\nexport default function TodoList() {\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [inputValue, setInputValue] = useState('');\n\n  // ä½¿ç”¨è®°å¿†hook\n  const { recordAction } = useMemory();\n\n  // ä½¿ç”¨æŒ‡ä»¤æ˜ å°„hookï¼Œä¼ é€’è®°å¿†å›è°ƒ\n  const { \n    executeInstruction, \n    getSupportedActions,\n    addTodo: addTodoFunction,\n    clearCompleted: clearCompletedFunction,\n    clearAll: clearAllFunction\n  } = useInstructionMapping({ \n    todos, \n    setTodos, \n    onActionExecuted: recordAction \n  });\n\n  // æœ¬åœ°æ·»åŠ ä»»åŠ¡ï¼ˆé€šè¿‡UIç›´æ¥æ“ä½œï¼‰\n  const addTodo = () => {\n    if (inputValue.trim() !== '') {\n      const result = addTodoFunction(inputValue.trim());\n      if (result.success) {\n        setInputValue('');\n      } else {\n        console.error('æ·»åŠ ä»»åŠ¡å¤±è´¥:', result.message);\n      }\n    }\n  };\n\n  // æœ¬åœ°åˆ é™¤ä»»åŠ¡ï¼ˆé€šè¿‡UIç›´æ¥æ“ä½œï¼‰\n  const deleteTodo = (id: number) => {\n    const result = executeInstruction({\n      action: 'delete',\n      id: id\n    });\n    if (!result.success) {\n      console.error('åˆ é™¤ä»»åŠ¡å¤±è´¥:', result.message);\n    }\n  };\n\n  // æœ¬åœ°åˆ‡æ¢ä»»åŠ¡çŠ¶æ€ï¼ˆé€šè¿‡UIç›´æ¥æ“ä½œï¼‰\n  const toggleTodo = (id: number) => {\n    const todo = todos.find(t => t.id === id);\n    if (todo && !todo.completed) {\n      const result = executeInstruction({\n        action: 'complete',\n        id: id\n      });\n      if (!result.success) {\n        console.error('å®Œæˆä»»åŠ¡å¤±è´¥:', result.message);\n      }\n    } else if (todo && todo.completed) {\n      // å¯¹äºå·²å®Œæˆçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å–æ¶ˆå®ŒæˆçŠ¶æ€\n      setTodos(todos.map(t =>\n        t.id === id ? { ...t, completed: false } : t\n      ));\n    }\n  };\n\n  // é€šè¿‡æ˜ å°„ç³»ç»Ÿæ¸…é™¤å·²å®Œæˆä»»åŠ¡\n  const clearCompleted = () => {\n    const result = clearCompletedFunction();\n    if (!result.success) {\n      console.error('æ¸…é™¤å·²å®Œæˆä»»åŠ¡å¤±è´¥:', result.message);\n    }\n  };\n\n  // é€šè¿‡æ˜ å°„ç³»ç»Ÿæ¸…é™¤æ‰€æœ‰ä»»åŠ¡\n  const clearAll = () => {\n    const result = clearAllFunction();\n    if (!result.success) {\n      console.error('æ¸…é™¤æ‰€æœ‰ä»»åŠ¡å¤±è´¥:', result.message);\n    }\n  };\n\n  const completedCount = todos.filter(todo => todo.completed).length;\n  const totalCount = todos.length;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4\">\n      <div className=\"max-w-6xl mx-auto h-[calc(100vh-2rem)] flex flex-col lg:flex-row gap-6\">\n        {/* å·¦ä¾§ï¼šå¾…åŠäº‹é¡¹ */}\n        <div className=\"flex-1 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 overflow-y-auto\">\n          <div className=\"mb-4\">\n            <h1 className=\"text-3xl font-bold text-center text-gray-800 dark:text-white mb-2\">\n              ğŸ“ æ™ºèƒ½ä¸Šä¸‹æ–‡è®°å¿†å¾…åŠäº‹é¡¹\n            </h1>\n            <p className=\"text-center text-sm text-gray-600 dark:text-gray-400\">\n              AI æŒ‡ä»¤æ˜ å°„ + ä¸Šä¸‹æ–‡è®°å¿† | æ”¯æŒæ“ä½œ: {getSupportedActions().join(', ')}\n            </p>\n            <p className=\"text-center text-xs text-gray-500 dark:text-gray-500 mt-1\">\n              ğŸ’¡ æ”¯æŒä¸Šä¸‹æ–‡å¼•ç”¨ï¼š&ldquo;å†åŠ ä¸€ä¸ªä»»åŠ¡&rdquo;ã€&ldquo;å®Œæˆåˆšæ‰é‚£ä¸ª&rdquo;ã€&ldquo;åˆ é™¤æœ€åæ·»åŠ çš„&rdquo;\n            </p>\n          </div>\n          \n          {/* æ·»åŠ æ–°ä»»åŠ¡ */}\n          <div className=\"flex gap-2 mb-6\">\n            <input\n              type=\"text\"\n              value={inputValue}\n              onChange={(e) => setInputValue(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && addTodo()}\n              placeholder=\"æ·»åŠ æ–°ä»»åŠ¡...\"\n              className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <button\n              onClick={addTodo}\n              className=\"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 font-medium\"\n            >\n              æ·»åŠ \n            </button>\n          </div>\n\n          {/* ç»Ÿè®¡ä¿¡æ¯ */}\n          {totalCount > 0 && (\n            <div className=\"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-300 text-center\">\n                æ€»è®¡: {totalCount} ä»»åŠ¡ | å·²å®Œæˆ: {completedCount} ä»»åŠ¡ | \n                å‰©ä½™: {totalCount - completedCount} ä»»åŠ¡\n              </p>\n            </div>\n          )}\n\n          {/* ä»»åŠ¡åˆ—è¡¨ */}\n          <div className=\"space-y-2\">\n            {todos.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-500 dark:text-gray-400 text-lg\">\n                  æš‚æ— ä»»åŠ¡ï¼Œæ·»åŠ ä¸€ä¸ªæ–°ä»»åŠ¡å¼€å§‹å§ï¼\n                </p>\n                <p className=\"text-sm text-gray-400 dark:text-gray-500 mt-2\">\n                  ğŸ’¡ ä½ å¯ä»¥ç›´æ¥åœ¨æ­¤æ·»åŠ ï¼Œæˆ–å‘<span className=\"lg:inline hidden\">å³ä¾§</span><span className=\"lg:hidden inline\">ä¸‹æ–¹</span>çš„ AI åŠ©æ‰‹å‘é€æŒ‡ä»¤\n                </p>\n                <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                  ä¾‹å¦‚ï¼š&ldquo;å¸®æˆ‘æ·»åŠ ä¸€ä¸ªå­¦ä¹ ä»»åŠ¡&rdquo; æˆ– &ldquo;æ·»åŠ ä¹°èœä»»åŠ¡&rdquo;\n                </p>\n                <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                  ğŸ”— æ”¯æŒä¸Šä¸‹æ–‡ï¼š&ldquo;å†åŠ ä¸€ä¸ªç±»ä¼¼çš„&rdquo; æˆ– &ldquo;å®Œæˆåˆšæ‰é‚£ä¸ª&rdquo;\n                </p>\n              </div>\n            ) : (\n              todos.map((todo) => (\n                <div\n                  key={todo.id}\n                  className={`flex items-center gap-3 p-3 rounded-lg border transition-all duration-200 ${\n                    todo.completed\n                      ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\n                      : 'bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:shadow-md'\n                  }`}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={todo.completed}\n                    onChange={() => toggleTodo(todo.id)}\n                    className=\"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 focus:ring-2\"\n                  />\n                  <span\n                    className={`flex-1 ${\n                      todo.completed\n                        ? 'line-through text-gray-500 dark:text-gray-400'\n                        : 'text-gray-800 dark:text-white'\n                    }`}\n                  >\n                    {todo.text}\n                  </span>\n                  <span className=\"text-xs text-gray-400 dark:text-gray-500\">\n                    ID: {todo.id}\n                  </span>\n                  <button\n                    onClick={() => deleteTodo(todo.id)}\n                    className=\"px-3 py-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors duration-200\"\n                    title=\"åˆ é™¤ä»»åŠ¡\"\n                  >\n                    ğŸ—‘ï¸\n                  </button>\n                </div>\n              ))\n            )}\n          </div>\n\n          {/* å¿«æ·æ“ä½œ */}\n          {todos.length > 0 && (\n            <div className=\"mt-6 flex gap-2 justify-center\">\n              <button\n                onClick={clearCompleted}\n                className=\"px-4 py-2 text-sm bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors duration-200\"\n                disabled={completedCount === 0}\n              >\n                æ¸…é™¤å·²å®Œæˆ ({completedCount})\n              </button>\n              <button\n                onClick={clearAll}\n                className=\"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200\"\n              >\n                æ¸…é™¤å…¨éƒ¨\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* å³ä¾§ï¼šAIåŠ©æ‰‹ä¾§è¾¹æ  */}\n        <div className=\"w-full lg:w-80 h-96 lg:h-full\">\n          <ChatSidebar executeInstruction={executeInstruction} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}